# Phase 4: 依赖更新

## 当前依赖版本

```
numpy>=1.17.0      # 2019年发布
pandas>=0.25.0     # 2019年发布
scipy>=1.3.0       # 2019年发布
pytz>=2023.3
packaging>=21.0
```

## 更新建议

### 最低版本更新

| 包 | 当前最低 | 建议最低 | 理由 |
|---|---------|---------|------|
| numpy | 1.17.0 | 1.24.0 | 性能改进，类型标注完善 |
| pandas | 0.25.0 | 2.0.0 | PyArrow 后端，性能提升 |
| scipy | 1.3.0 | 1.11.0 | bug 修复 |

### Python 版本支持

**当前**: 3.11, 3.12, 3.13
**建议**: 保持不变，等待 3.14 稳定后测试

## 兼容性测试

### 测试矩阵

| Python | NumPy | Pandas | 状态 |
|--------|-------|--------|------|
| 3.11 | 1.24+ | 2.0+ | 待测试 |
| 3.12 | 1.26+ | 2.0+ | 待测试 |
| 3.13 | 2.0+ | 2.2+ | 待测试 |

### 测试命令

```bash
# 创建不同版本测试环境
python -m venv .venv-py311-old
source .venv-py311-old/bin/activate
pip install numpy==1.24.0 pandas==2.0.0 scipy==1.11.0
pip install -e ".[dev,viz]"
pytest tests/ -n 4
```

## 执行步骤

1. 在开发环境更新最低版本
2. 运行完整测试套件
3. 检查弃用警告
4. 更新文档中的版本要求
5. 发布 minor 版本 (0.2.0)

## 注意事项

- 确保不破坏现有用户
- 给予足够长的迁移期
- 在 CHANGELOG 中明确说明破坏性变更

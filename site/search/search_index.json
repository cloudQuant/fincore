{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"fincore | Quantitative Performance &amp; Risk Analytics","text":"<p>fincore is a Python library for calculating common financial risk and performance metrics. It continues the empyrical analytics stack under active maintenance by cloudQuant.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>150+ Financial Metrics \u2014 returns, risk, drawdown, alpha/beta, capture ratios, timing</li> <li>AnalysisContext \u2014 one-liner <code>fincore.analyze()</code> with lazy cached computation</li> <li>RollingEngine \u2014 batch rolling metrics in a single call</li> <li>Pluggable Visualization \u2014 Matplotlib, HTML, Plotly, Bokeh backends</li> <li>Portfolio Optimization \u2014 efficient frontier, risk parity, constrained optimization</li> <li>Monte Carlo Simulation \u2014 bootstrap, scenario testing, path simulation</li> <li>Performance Attribution \u2014 Brinson, Fama-French, style analysis</li> <li>Lazy Imports \u2014 <code>import fincore</code> in ~0.04s</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>import fincore\n\nctx = fincore.analyze(returns, factor_returns=benchmark)\n\nprint(f\"Sharpe: {ctx.sharpe_ratio:.4f}\")\nprint(f\"Max DD: {ctx.max_drawdown:.4f}\")\nprint(f\"Alpha:  {ctx.alpha:.6f}\")\n\nctx.to_html(path=\"report.html\")\n</code></pre>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install fincore\n\n# With visualization\npip install \"fincore[viz]\"\n\n# Everything\npip install \"fincore[all]\"\n</code></pre>"},{"location":"#project-stats","title":"Project Stats","text":"Metric Value Source files 85 Python files, ~26,700 lines Tests 1,800 passing Docstring coverage 92% Python versions 3.11, 3.12, 3.13 Platforms macOS, Linux, Windows License Apache 2.0"},{"location":"api/","title":"API Reference","text":""},{"location":"api/#package-structure","title":"Package Structure","text":"<pre><code>fincore/\n\u251c\u2500\u2500 __init__.py          # Flat API: sharpe_ratio, max_drawdown, ...\n\u251c\u2500\u2500 empyrical.py         # Empyrical facade class (150+ methods)\n\u251c\u2500\u2500 pyfolio.py           # Pyfolio tearsheet class\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 context.py       # AnalysisContext\n\u2502   \u2514\u2500\u2500 engine.py        # RollingEngine\n\u251c\u2500\u2500 metrics/             # 17 metric modules\n\u251c\u2500\u2500 viz/                 # Visualization backends\n\u251c\u2500\u2500 optimization/        # Portfolio optimization\n\u251c\u2500\u2500 simulation/          # Monte Carlo, bootstrap\n\u251c\u2500\u2500 attribution/         # Brinson, Fama-French\n\u251c\u2500\u2500 risk/                # EVT, GARCH\n\u2514\u2500\u2500 report/              # HTML/PDF reports\n</code></pre>"},{"location":"api/#module-pages","title":"Module Pages","text":"<ul> <li>fincore (top-level) \u2014 Flat API and main classes</li> <li>fincore.metrics \u2014 All metric functions</li> <li>fincore.core \u2014 AnalysisContext and RollingEngine</li> <li>fincore.viz \u2014 Visualization backends</li> <li>fincore.optimization \u2014 Portfolio optimization</li> <li>fincore.simulation \u2014 Monte Carlo simulation</li> <li>fincore.attribution \u2014 Performance attribution</li> <li>fincore.risk \u2014 Risk models</li> <li>fincore.report \u2014 Report generation</li> </ul>"},{"location":"api/attribution/","title":"fincore.attribution","text":""},{"location":"api/attribution/#brinson-attribution","title":"Brinson Attribution","text":""},{"location":"api/attribution/#fincore.attribution.brinson","title":"<code>fincore.attribution.brinson</code>","text":"<p>Brinson attribution analysis for portfolio performance.</p> <p>Decomposes portfolio excess returns into: - Allocation effect: returns from overweighting/underweighting sectors - Selection effect: returns from stock selection within sectors - Interaction effect: returns from interaction of allocation and selection</p>"},{"location":"api/attribution/#fincore.attribution.brinson.BrinsonAttribution","title":"<code>BrinsonAttribution(sector_mapping=None)</code>","text":"<p>Brinson attribution calculator with sector mapping support.</p> <p>Provides convenient interface for multi-period Brinson attribution with sector/asset classification.</p> <p>Initialize Brinson attribution calculator.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>sector_mapping</code> <code>dict</code> <p>Mapping from sector name to a list of asset column names. Example: {'Technology': ['AAPL', 'MSFT'], 'Financial': ['JPM']}</p> <code>None</code>"},{"location":"api/attribution/#fincore.attribution.brinson.BrinsonAttribution.calculate","title":"<code>calculate(returns, benchmark_returns=None, weights=None, method='brinson')</code>","text":"<p>Calculate Brinson attribution for returns DataFrame.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N assets). Columns should be asset names.</p> \u200b\u5fc5\u9700\u200b <code>benchmark_returns</code> <code>DataFrame</code> <p>Benchmark returns. If None, uses equal-weighted benchmark.</p> <code>None</code> <code>weights</code> <code>DataFrame</code> <p>Portfolio weights. If None, uses equal weights.</p> <code>None</code> <code>method</code> <code>str</code> <p>Attribution method. Options: 'brinson', 'brinson_hood'.</p> <code>\"brinson\"</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Attribution results by period.</p>"},{"location":"api/attribution/#fincore.attribution.brinson.brinson_attribution","title":"<code>brinson_attribution(portfolio_returns, benchmark_returns, portfolio_weights, benchmark_weights)</code>","text":"<p>Calculate Brinson attribution for a single period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>portfolio_returns</code> <code>Series or ndarray</code> <p>Portfolio returns for the period.</p> \u200b\u5fc5\u9700\u200b <code>benchmark_returns</code> <code>Series or ndarray</code> <p>Benchmark returns for the period.</p> \u200b\u5fc5\u9700\u200b <code>portfolio_weights</code> <code>DataFrame</code> <p>Portfolio weights by sector/asset for the period. benchmark_weights : pd.DataFrame Benchmark weights by sector/asset for the period.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Dictionary with attribution breakdown: - 'allocation': Allocation effect - 'selection': Selection effect - 'interaction': Interaction effect - 'total': Total active return - 'portfolio_return': Portfolio return - 'benchmark_return': Benchmark return</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; portfolio_returns = np.array([0.05, 0.03, -0.02, 0.04])\n&gt;&gt;&gt; benchmark_returns = np.array([0.03, 0.02, -0.01, 0.03])\n&gt;&gt;&gt; portfolio_weights = pd.DataFrame({\n...     'Sector_A': [0.4, 0.3, 0.2, 0.1],\n...     'Sector_B': [0.3, 0.3, 0.3, 0.1],\n... })\n&gt;&gt;&gt; benchmark_weights = pd.DataFrame({\n...     'Sector_A': [0.5, 0.3, 0.1, 0.1],\n...     'Sector_B': [0.3, 0.3, 0.3, 0.1],\n... })\n&gt;&gt;&gt; result = brinson_attribution(\n...     portfolio_returns, benchmark_returns,\n...     portfolio_weights, benchmark_weights\n... )\n&gt;&gt;&gt; print(f\"Allocation: {result['allocation']:.2%}\")\n</code></pre>"},{"location":"api/attribution/#fincore.attribution.brinson.brinson_results","title":"<code>brinson_results(portfolio_returns, benchmark_returns, portfolio_weights, benchmark_weights, periods=None)</code>","text":"<p>Calculate Brinson attribution over multiple periods.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>portfolio_returns</code> <code>Series or ndarray</code> <p>Portfolio returns (T periods).</p> \u200b\u5fc5\u9700\u200b <code>benchmark_returns</code> <code>Series or ndarray</code> <p>Benchmark returns (T periods).</p> \u200b\u5fc5\u9700\u200b <code>portfolio_weights</code> <code>DataFrame</code> <p>Portfolio weights for each period (T x sectors).</p> \u200b\u5fc5\u9700\u200b <code>benchmark_weights</code> <code>DataFrame</code> <p>Benchmark weights for each period (T x sectors).</p> \u200b\u5fc5\u9700\u200b <code>periods</code> <code>list of str</code> <p>Period labels. If None, uses integer indices.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>DataFrame with attribution results for each period. Columns: period, allocation, selection, interaction, total, portfolio_return, benchmark_return</p>"},{"location":"api/attribution/#fincore.attribution.brinson.brinson_cumulative","title":"<code>brinson_cumulative(portfolio_returns, benchmark_returns, portfolio_weights, benchmark_weights)</code>","text":"<p>Calculate cumulative Brinson attribution.</p> <p>This aggregates per-period Brinson effects (arithmetic sum across periods). It also reports geometric cumulative portfolio/benchmark returns computed from per-period weighted returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>portfolio_returns</code> <code>Series or ndarray</code> <p>Portfolio returns.</p> \u200b\u5fc5\u9700\u200b <code>benchmark_returns</code> <code>Series or ndarray</code> <p>Benchmark returns.</p> \u200b\u5fc5\u9700\u200b <code>portfolio_weights</code> <code>DataFrame</code> <p>Portfolio weights (final weights for cumulative).</p> \u200b\u5fc5\u9700\u200b <code>benchmark_weights</code> <code>DataFrame</code> <p>Benchmark weights (final weights for cumulative).</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Cumulative attribution breakdown.</p>"},{"location":"api/attribution/#fama-french","title":"Fama-French","text":""},{"location":"api/attribution/#fincore.attribution.fama_french","title":"<code>fincore.attribution.fama_french</code>","text":"<p>Fama-French multi-factor model implementation.</p> <p>Provides factor model estimation and attribution using the Fama-French multi-factor framework: - 3-Factor model: Market (MKT), Size (SMB), Value (HML) - 5-Factor model: MKT, SMB, HML, Profitability (RMW), Investment (CMA) - Momentum: Fama-French-Carhart 4-factor model</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchFitResult","title":"<code>FamaFrenchFitResult</code>","text":"<p>               Bases: <code>TypedDict</code></p> <p>Result of Fama-French factor model regression.</p> <p>\u200b\u5c5e\u6027\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>alpha</code> <code>float</code> <p>Intercept (alpha) of the regression.</p> <code>betas</code> <code>dict[str, float]</code> <p>Factor loadings for each factor.</p> <code>r_squared</code> <code>float</code> <p>R-squared of the regression.</p> <code>std_errors</code> <code>ndarray</code> <p>Standard errors of coefficients.</p> <code>p_values</code> <code>ndarray</code> <p>P-values for coefficient significance tests.</p> <code>residuals</code> <code>ndarray</code> <p>Residuals from the regression.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchModel","title":"<code>FamaFrenchModel(model_type='5factor', risk_free_rate=0.0)</code>","text":"<p>Fama-French multi-factor model estimator.</p> <p>Supports OLS regression with Newey-West standard errors and various factor model specifications.</p> <p>Initialize Fama-French model.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>model_type</code> <code>str</code> <p>Factor model specification. Options: '3factor', '5factor', '4factor_mom'</p> <code>\"5factor\"</code> <code>risk_free_rate</code> <code>float</code> <p>Risk-free rate for excess returns calculation.</p> <code>0.0</code>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchModel.fit","title":"<code>fit(returns, factor_data, method='ols', newey_west_lags=1)</code>","text":"<p>Estimate factor model using OLS regression.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or DataFrame</code> <p>Asset or portfolio returns to explain.</p> \u200b\u5fc5\u9700\u200b <code>factor_data</code> <code>DataFrame</code> <p>Factor returns with columns matching factor definitions.</p> \u200b\u5fc5\u9700\u200b <code>method</code> <code>str</code> <p>Estimation method. Options: 'ols', 'wls', 'gls'.</p> <code>\"ols\"</code> <code>newey_west_lags</code> <code>int</code> <p>Number of lags for Newey-West standard errors.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Dictionary containing: - 'alpha': Intercept (alpha) - 'betas': Factor loadings - 'r_squared': R-squared of regression - 'std_errors': Standard errors (Newey-West if lags &gt; 0) - 'p_values': P-values for coefficients - 'residuals': Regression residuals</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchModel.predict","title":"<code>predict(factor_data)</code>","text":"<p>Predict returns using estimated model.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>factor_data</code> <code>DataFrame</code> <p>Factor returns with columns matching factor definitions.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Predicted returns.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchModel.get_factor_exposures","title":"<code>get_factor_exposures(returns, factor_data, rolling_window=None)</code>","text":"<p>Calculate rolling factor exposures (betas).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>factor_data</code> <code>DataFrame</code> <p>Factor returns (T x K factors).</p> \u200b\u5fc5\u9700\u200b <code>rolling_window</code> <code>int</code> <p>Rolling window size. If None, full sample.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Rolling factor exposures (T x K).</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchModel.attribution_decomposition","title":"<code>attribution_decomposition(returns, factor_data)</code>","text":"<p>Decompose returns using factor model.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Portfolio returns to attribute.</p> \u200b\u5fc5\u9700\u200b <code>factor_data</code> <code>DataFrame</code> <p>Factor returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Factor attribution breakdown.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchProvider","title":"<code>FamaFrenchProvider</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Protocol for Fama-French factor data providers.</p> <p>A provider function that takes date range and library name, and returns a DataFrame of factor returns.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.FamaFrenchProvider.__call__","title":"<code>__call__(start, end, library)</code>","text":"<p>Fetch Fama-French factor data.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>start</code> <code>str</code> <p>Start date (YYYY-MM-DD format).</p> \u200b\u5fc5\u9700\u200b <code>end</code> <code>str</code> <p>End date (YYYY-MM-DD format).</p> \u200b\u5fc5\u9700\u200b <code>library</code> <code>str</code> <p>Data library identifier.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Factor returns with columns for each factor.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.fetch_ff_factors","title":"<code>fetch_ff_factors(start, end, library='french', *, provider=None, copy=True)</code>","text":"<p>Fetch Fama-French factors.</p> <p>.. note::</p> <p>A concrete data provider must be configured before calling this    function.  Pass a <code>provider</code> that implements the    <code>FamaFrenchProvider</code> protocol, or set a module-level provider    via :func:<code>set_ff_provider</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>start</code> <code>str</code> <p>Start date (YYYY-MM-DD).</p> \u200b\u5fc5\u9700\u200b <code>end</code> <code>str</code> <p>End date (YYYY-MM-DD).</p> \u200b\u5fc5\u9700\u200b <code>library</code> <code>str</code> <p>Data source. Options: 'french', 'chinese'.</p> <code>\"french\"</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>DataFrame with factor returns. Columns depend on library.</p> <p>\u200b\u5f15\u53d1\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>NotImplementedError</code> <p>Raised when no provider is configured.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.set_ff_provider","title":"<code>set_ff_provider(provider)</code>","text":"<p>Set the module-level Fama-French factor provider and clear cache.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.clear_ff_factor_cache","title":"<code>clear_ff_factor_cache()</code>","text":"<p>Clear the in-process factor cache used by :func:<code>fetch_ff_factors</code>.</p>"},{"location":"api/attribution/#fincore.attribution.fama_french.calculate_idiosyncratic_risk","title":"<code>calculate_idiosyncratic_risk(returns, factor_data, model=None)</code>","text":"<p>Calculate idiosyncratic volatility (asset-specific risk).</p> <p>Measures risk that cannot be diversified away: VAR(asset) - cov(asset, market) * var(market) / cov(market, market)</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (N assets x T).</p> \u200b\u5fc5\u9700\u200b <code>factor_data</code> <code>DataFrame</code> <p>Market factor returns (T x K).</p> \u200b\u5fc5\u9700\u200b <code>model</code> <code>FamaFrenchModel</code> <p>Pre-fitted model. If None, fits new model.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Idiosyncratic volatility for each asset.</p>"},{"location":"api/attribution/#style-analysis","title":"Style Analysis","text":""},{"location":"api/attribution/#fincore.attribution.style","title":"<code>fincore.attribution.style</code>","text":"<p>Style analysis for portfolio returns.</p> <p>Analyzes portfolio returns by style characteristics: - Size (large-cap, mid-cap, small-cap) - Value (value, growth)     Momentum (winner, loser)     Volatility (high, low)</p>"},{"location":"api/attribution/#fincore.attribution.style.StyleResult","title":"<code>StyleResult(exposures, returns_by_style, overall_returns)</code>","text":"<p>Container for style analysis results.</p> <p>Initialize style result.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>exposures</code> <code>DataFrame</code> <p>Style exposures (N assets x S styles).</p> \u200b\u5fc5\u9700\u200b <code>returns_by_style</code> <code>DataFrame</code> <p>Returns for each style (styles x 1).</p> \u200b\u5fc5\u9700\u200b <code>overall_returns</code> <code>Series</code> <p>Overall portfolio returns.</p> \u200b\u5fc5\u9700"},{"location":"api/attribution/#fincore.attribution.style.StyleResult.style_summary","title":"<code>style_summary</code>  <code>property</code>","text":"<p>Get summary of style returns.</p>"},{"location":"api/attribution/#fincore.attribution.style.StyleResult.__contains__","title":"<code>__contains__(key)</code>","text":"<p>Support <code>key in result</code> syntax.</p>"},{"location":"api/attribution/#fincore.attribution.style.StyleResult.__getitem__","title":"<code>__getitem__(key)</code>","text":"<p>Support <code>result[key]</code> syntax.</p>"},{"location":"api/attribution/#fincore.attribution.style.StyleResult.to_dict","title":"<code>to_dict()</code>","text":"<p>Convert results to dictionary.</p>"},{"location":"api/attribution/#fincore.attribution.style.style_analysis","title":"<code>style_analysis(returns, market_caps=None, book_to_price=None, momentum_window=252, size_quantiles=None, value_scores=None)</code>","text":"<p>Perform comprehensive style analysis on portfolio returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N). Columns should be asset names.</p> \u200b\u5fc5\u9700\u200b <code>market_caps</code> <code>Series</code> <p>Market capitalizations for size classification. If None, market_cap weighted returns used.</p> <code>None</code> <code>book_to_price</code> <code>Series</code> <p>Book-to-price ratios for value classification. If None, assumes all equity.</p> <code>None</code> <code>momentum_window</code> <code>int</code> <p>Lookback period for momentum calculation.</p> <code>252</code> <code>size_quantiles</code> <code>list of float</code> <p>Quantiles for size classification.</p> <code>[0.5, 0.5]</code> <code>value_scores</code> <code>Series</code> <p>Fundamental value scores for value classification. If provided, used instead of book_to_price.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>StyleResult</code> <p>Style analysis results with exposures and returns by style.</p>"},{"location":"api/attribution/#fincore.attribution.style.calculate_style_tilts","title":"<code>calculate_style_tilts(returns, factor_returns=None, window=252)</code>","text":"<p>Calculate rolling style exposures (size, value, momentum).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>DataFrame</code> <p>Factor returns for calculating style relative to factor. If None, uses cross-sectional ranking.</p> <code>None</code> <code>window</code> <code>int</code> <p>Rolling window size.</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Time series of style exposures for each asset. Index: dates, Columns: {asset}_{style} format.</p>"},{"location":"api/attribution/#fincore.attribution.style.calculate_regression_attribution","title":"<code>calculate_regression_attribution(portfolio_returns, style_returns=None, style_exposures=None)</code>","text":"<p>Attribute portfolio returns using style exposures.</p> <p>If <code>style_returns</code> and <code>style_exposures</code> are not provided, they are derived automatically by running :func:<code>style_analysis</code> on <code>portfolio_returns</code> (which must be a DataFrame of asset returns in that case).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>portfolio_returns</code> <code>Series or DataFrame</code> <p>Portfolio returns (Series) or asset returns (DataFrame). If DataFrame and <code>style_returns</code>/<code>style_exposures</code> are None, a style analysis is run automatically.</p> \u200b\u5fc5\u9700\u200b <code>style_returns</code> <code>DataFrame</code> <p>Returns for each style factor (T x S).</p> <code>None</code> <code>style_exposures</code> <code>DataFrame</code> <p>Style exposures (N x S) or (T x S).</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Attribution by style factor, including 'residual'.</p>"},{"location":"api/attribution/#fincore.attribution.style.analyze_performance_by_style","title":"<code>analyze_performance_by_style(returns, style_exposures=None)</code>","text":"<p>Analyze performance metrics grouped by style.</p> <p>If <code>style_exposures</code> is not provided, it is derived automatically by running :func:<code>style_analysis</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>style_exposures</code> <code>DataFrame</code> <p>Style exposures (N x S).  If None, derived from <code>style_analysis</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Performance metrics by style (columns: <code>{style}_return</code>).</p>"},{"location":"api/attribution/#fincore.attribution.style.fetch_style_factors","title":"<code>fetch_style_factors(tickers, factors=None, library='us')</code>","text":"<p>Fetch style factor data.</p> <p>.. note::</p> <p>A concrete data provider must be configured before calling this    function.  Pass pre-fetched factor data directly to    :func:<code>style_analysis</code> or :func:<code>calculate_style_tilts</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>tickers</code> <code>list of str</code> <p>Asset tickers.</p> \u200b\u5fc5\u9700\u200b <code>factors</code> <code>list of str</code> <p>Style factors to fetch.</p> <code>[\"size\", \"value\", \"momentum\"]</code> <code>library</code> <code>str</code> <p>Data source library. Options: 'us', 'chinese'.</p> <code>\"us\"</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Factor data with MultiIndex (date, factor).</p> <p>\u200b\u5f15\u53d1\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>NotImplementedError</code> <p>Always raised until a data provider is configured.</p>"},{"location":"api/core/","title":"fincore.core","text":""},{"location":"api/core/#analysiscontext","title":"AnalysisContext","text":""},{"location":"api/core/#fincore.core.context.AnalysisContext","title":"<code>fincore.core.context.AnalysisContext(returns, *, factor_returns=None, positions=None, transactions=None, period=DAILY)</code>","text":"<p>Lazy, cached container for performance analytics.</p> <p>All metrics are computed on first access and cached via :func:<code>functools.cached_property</code>.  Call :meth:<code>invalidate</code> to clear all cached values (e.g. after replacing the underlying data).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative simple returns with a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark / factor returns aligned to the same dates.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Daily net position values.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Executed trades.</p> <code>None</code> <code>period</code> <code>str</code> <p>Data frequency.  Default <code>DAILY</code>.</p> <code>DAILY</code> <p>Initialize the analysis context.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Portfolio returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark or factor returns.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Portfolio positions.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Executed trades.</p> <code>None</code> <code>period</code> <code>str</code> <p>Data frequency.</p> <code>DAILY</code>"},{"location":"api/core/#fincore.core.context.AnalysisContext.annual_return","title":"<code>annual_return</code>  <code>cached</code> <code>property</code>","text":"<p>Annualized return.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.cumulative_returns","title":"<code>cumulative_returns</code>  <code>cached</code> <code>property</code>","text":"<p>Total cumulative return.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.annual_volatility","title":"<code>annual_volatility</code>  <code>cached</code> <code>property</code>","text":"<p>Annualized volatility.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.sharpe_ratio","title":"<code>sharpe_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Sharpe ratio (annualized).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.calmar_ratio","title":"<code>calmar_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Calmar ratio (annual return / max drawdown).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.stability","title":"<code>stability</code>  <code>cached</code> <code>property</code>","text":"<p>R-squared of linear fit to cumulative returns.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.max_drawdown","title":"<code>max_drawdown</code>  <code>cached</code> <code>property</code>","text":"<p>Maximum drawdown.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.omega_ratio","title":"<code>omega_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Omega ratio.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.sortino_ratio","title":"<code>sortino_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Sortino ratio (annualized).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.skew","title":"<code>skew</code>  <code>cached</code> <code>property</code>","text":"<p>Return skewness.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.kurtosis","title":"<code>kurtosis</code>  <code>cached</code> <code>property</code>","text":"<p>Return kurtosis.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.tail_ratio","title":"<code>tail_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Tail ratio (95th percentile / 5th percentile).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.daily_value_at_risk","title":"<code>daily_value_at_risk</code>  <code>cached</code> <code>property</code>","text":"<p>Daily Value at Risk.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.alpha","title":"<code>alpha</code>  <code>cached</code> <code>property</code>","text":"<p>Alpha (excess return over factor returns).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.beta","title":"<code>beta</code>  <code>cached</code> <code>property</code>","text":"<p>Beta (sensitivity to factor returns).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.perf_stats","title":"<code>perf_stats()</code>","text":"<p>Return a :class:<code>pd.Series</code> of key performance metrics.</p> <p>This method assembles the cached sub-metrics so that repeated calls are essentially free after the first computation.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.to_dict","title":"<code>to_dict()</code>","text":"<p>Return metrics as a plain dict (JSON-friendly values).</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.to_json","title":"<code>to_json(**kwargs)</code>","text":"<p>Serialize metrics to a JSON string.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.plot","title":"<code>plot(backend='matplotlib', **kwargs)</code>","text":"<p>Plot key performance charts using the specified backend.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>backend</code> <code>str</code> <p>Visualization backend name (<code>'matplotlib'</code> or <code>'html'</code>).</p> <code>'matplotlib'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Depends on the backend (e.g. matplotlib Figure or HTML string).</code>"},{"location":"api/core/#fincore.core.context.AnalysisContext.to_html","title":"<code>to_html(path=None)</code>","text":"<p>Generate a self-contained HTML performance report.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>path</code> <code>str</code> <p>If given, write the HTML to this file path.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>str</code> <p>The HTML report as a string.</p>"},{"location":"api/core/#fincore.core.context.AnalysisContext.invalidate","title":"<code>invalidate()</code>","text":"<p>Clear all cached metric values.</p>"},{"location":"api/core/#rollingengine","title":"RollingEngine","text":""},{"location":"api/core/#fincore.core.engine.RollingEngine","title":"<code>fincore.core.engine.RollingEngine(returns, *, factor_returns=None, window=252, period=DAILY)</code>","text":"<p>Batch rolling metric computation engine.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative simple returns with a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark returns (required for <code>beta</code>).</p> <code>None</code> <code>window</code> <code>int</code> <p>Rolling window size.  Default 252 (approx. 1 year of daily data).</p> <code>252</code> <code>period</code> <code>str</code> <p>Data frequency.  Default <code>DAILY</code>.</p> <code>DAILY</code>"},{"location":"api/core/#fincore.core.engine.RollingEngine.available_metrics","title":"<code>available_metrics</code>  <code>property</code>","text":"<p>Return the set of metric names supported by this engine.</p>"},{"location":"api/core/#fincore.core.engine.RollingEngine.compute","title":"<code>compute(metrics='all')</code>","text":"<p>Compute the requested rolling metrics.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>metrics</code> <code>list of str or ``'all'``</code> <p>Which metrics to compute.  Pass <code>'all'</code> to compute every available metric.</p> <code>'all'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict[str, Series]</code> <p>Mapping from metric name to rolling values.</p>"},{"location":"api/fincore/","title":"fincore (top-level)","text":""},{"location":"api/fincore/#flat-api-functions","title":"Flat API Functions","text":"<pre><code>import fincore\n\nfincore.sharpe_ratio(returns)\nfincore.max_drawdown(returns)\nfincore.annual_return(returns)\nfincore.alpha_beta(returns, benchmark)\n</code></pre>"},{"location":"api/fincore/#main-classes","title":"Main Classes","text":""},{"location":"api/fincore/#fincore.core.context.AnalysisContext","title":"<code>fincore.core.context.AnalysisContext(returns, *, factor_returns=None, positions=None, transactions=None, period=DAILY)</code>","text":"<p>Lazy, cached container for performance analytics.</p> <p>All metrics are computed on first access and cached via :func:<code>functools.cached_property</code>.  Call :meth:<code>invalidate</code> to clear all cached values (e.g. after replacing the underlying data).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative simple returns with a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark / factor returns aligned to the same dates.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Daily net position values.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Executed trades.</p> <code>None</code> <code>period</code> <code>str</code> <p>Data frequency.  Default <code>DAILY</code>.</p> <code>DAILY</code> <p>Initialize the analysis context.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Portfolio returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark or factor returns.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Portfolio positions.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Executed trades.</p> <code>None</code> <code>period</code> <code>str</code> <p>Data frequency.</p> <code>DAILY</code>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.annual_return","title":"<code>annual_return</code>  <code>cached</code> <code>property</code>","text":"<p>Annualized return.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.cumulative_returns","title":"<code>cumulative_returns</code>  <code>cached</code> <code>property</code>","text":"<p>Total cumulative return.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.annual_volatility","title":"<code>annual_volatility</code>  <code>cached</code> <code>property</code>","text":"<p>Annualized volatility.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.sharpe_ratio","title":"<code>sharpe_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Sharpe ratio (annualized).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.calmar_ratio","title":"<code>calmar_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Calmar ratio (annual return / max drawdown).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.stability","title":"<code>stability</code>  <code>cached</code> <code>property</code>","text":"<p>R-squared of linear fit to cumulative returns.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.max_drawdown","title":"<code>max_drawdown</code>  <code>cached</code> <code>property</code>","text":"<p>Maximum drawdown.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.omega_ratio","title":"<code>omega_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Omega ratio.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.sortino_ratio","title":"<code>sortino_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Sortino ratio (annualized).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.skew","title":"<code>skew</code>  <code>cached</code> <code>property</code>","text":"<p>Return skewness.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.kurtosis","title":"<code>kurtosis</code>  <code>cached</code> <code>property</code>","text":"<p>Return kurtosis.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.tail_ratio","title":"<code>tail_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Tail ratio (95th percentile / 5th percentile).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.daily_value_at_risk","title":"<code>daily_value_at_risk</code>  <code>cached</code> <code>property</code>","text":"<p>Daily Value at Risk.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.alpha","title":"<code>alpha</code>  <code>cached</code> <code>property</code>","text":"<p>Alpha (excess return over factor returns).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.beta","title":"<code>beta</code>  <code>cached</code> <code>property</code>","text":"<p>Beta (sensitivity to factor returns).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.perf_stats","title":"<code>perf_stats()</code>","text":"<p>Return a :class:<code>pd.Series</code> of key performance metrics.</p> <p>This method assembles the cached sub-metrics so that repeated calls are essentially free after the first computation.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.to_dict","title":"<code>to_dict()</code>","text":"<p>Return metrics as a plain dict (JSON-friendly values).</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.to_json","title":"<code>to_json(**kwargs)</code>","text":"<p>Serialize metrics to a JSON string.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.plot","title":"<code>plot(backend='matplotlib', **kwargs)</code>","text":"<p>Plot key performance charts using the specified backend.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>backend</code> <code>str</code> <p>Visualization backend name (<code>'matplotlib'</code> or <code>'html'</code>).</p> <code>'matplotlib'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Depends on the backend (e.g. matplotlib Figure or HTML string).</code>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.to_html","title":"<code>to_html(path=None)</code>","text":"<p>Generate a self-contained HTML performance report.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>path</code> <code>str</code> <p>If given, write the HTML to this file path.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>str</code> <p>The HTML report as a string.</p>"},{"location":"api/fincore/#fincore.core.context.AnalysisContext.invalidate","title":"<code>invalidate()</code>","text":"<p>Clear all cached metric values.</p>"},{"location":"api/fincore/#fincore.core.engine.RollingEngine","title":"<code>fincore.core.engine.RollingEngine(returns, *, factor_returns=None, window=252, period=DAILY)</code>","text":"<p>Batch rolling metric computation engine.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative simple returns with a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark returns (required for <code>beta</code>).</p> <code>None</code> <code>window</code> <code>int</code> <p>Rolling window size.  Default 252 (approx. 1 year of daily data).</p> <code>252</code> <code>period</code> <code>str</code> <p>Data frequency.  Default <code>DAILY</code>.</p> <code>DAILY</code>"},{"location":"api/fincore/#fincore.core.engine.RollingEngine.available_metrics","title":"<code>available_metrics</code>  <code>property</code>","text":"<p>Return the set of metric names supported by this engine.</p>"},{"location":"api/fincore/#fincore.core.engine.RollingEngine.compute","title":"<code>compute(metrics='all')</code>","text":"<p>Compute the requested rolling metrics.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>metrics</code> <code>list of str or ``'all'``</code> <p>Which metrics to compute.  Pass <code>'all'</code> to compute every available metric.</p> <code>'all'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict[str, Series]</code> <p>Mapping from metric name to rolling values.</p>"},{"location":"api/metrics/","title":"fincore.metrics","text":""},{"location":"api/metrics/#returns","title":"Returns","text":""},{"location":"api/metrics/#fincore.metrics.returns","title":"<code>fincore.metrics.returns</code>","text":"<p>Return calculation utilities.</p> <p>This module provides core functions for return analytics, including: - simple returns from prices - cumulative return series and final cumulative return - return aggregation (e.g. weekly/monthly/yearly) - normalization of a value series to a starting value</p>"},{"location":"api/metrics/#fincore.metrics.returns.annual_return","title":"<code>annual_return(*args, **kwargs)</code>","text":"<p>Backwards-compatible wrapper for computing annual return (CAGR).</p> <p>The implementation lives in :func:<code>fincore.metrics.yearly.annual_return</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>*args</code> <code>tuple</code> <p>Positional arguments forwarded to <code>yearly.annual_return</code>.</p> <code>()</code> <code>**kwargs</code> <code>dict</code> <p>Keyword arguments forwarded to <code>yearly.annual_return</code>.</p> <code>{}</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Annual return.</p> See Also <p>fincore.metrics.yearly.annual_return : Implementation.</p>"},{"location":"api/metrics/#fincore.metrics.returns.simple_returns","title":"<code>simple_returns(prices)</code>","text":"<p>Compute simple returns from a time series of prices.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>prices</code> <code>array - like or Series or DataFrame</code> <p>Time series of prices.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>array - like or Series or DataFrame</code> <p>Simple returns computed as <code>(price[t] - price[t-1])</code> divided by <code>price[t-1]</code>. The first observation is dropped. For pandas inputs, the index is preserved (excluding the first element).</p>"},{"location":"api/metrics/#fincore.metrics.returns.cum_returns","title":"<code>cum_returns(returns, starting_value=0, out=None)</code>","text":"<p>Compute cumulative returns from simple returns.</p> <p>This compounds the input returns and optionally scales by an initial <code>starting_value</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>starting_value</code> <code>float</code> <p>Initial portfolio value. If <code>0</code> (default), the result is returned as a pure cumulative return. Otherwise, the result is scaled so that <code>starting_value * cumprod(1 + returns)</code> is returned.</p> <code>0</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>array - like or Series or DataFrame</code> <p>Cumulative returns. The type mirrors the input type.</p>"},{"location":"api/metrics/#fincore.metrics.returns.cum_returns_final","title":"<code>cum_returns_final(returns, starting_value=0)</code>","text":"<p>Compute total cumulative return from a series of simple returns.</p> <p>This computes the cumulative return by compounding simple period returns and optionally scaling by an initial <code>starting_value</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns. For a DataFrame, the computation is performed column-wise.</p> \u200b\u5fc5\u9700\u200b <code>starting_value</code> <code>float</code> <p>Initial portfolio value. If <code>0</code> (default), the result is returned as a pure return (ending_value - 1). Otherwise, the result is scaled so that <code>starting_value * cumprod(1 + returns)</code> is returned.</p> <code>0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series or DataFrame</code> <p>Final cumulative return (or value, depending on <code>starting_value</code>). The type mirrors the input type.</p>"},{"location":"api/metrics/#fincore.metrics.returns.aggregate_returns","title":"<code>aggregate_returns(returns, convert_to='monthly')</code>","text":"<p>Aggregate returns at a weekly/monthly/quarterly/yearly frequency.</p> <p>The function groups the input return series by calendar period and compounds the returns within each group using :func:<code>cum_returns</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns with a <code>DatetimeIndex</code>.</p> \u200b\u5fc5\u9700\u200b <code>convert_to</code> <code>('weekly', 'monthly', 'quarterly', 'yearly')</code> <p>Target aggregation frequency. Case-insensitive. Default is <code>\"monthly\"</code>.</p> <code>\"weekly\"</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Aggregated returns at the requested frequency, indexed by (year, period) where period is week number, month, quarter, or year depending on <code>convert_to</code>.</p>"},{"location":"api/metrics/#fincore.metrics.returns.normalize","title":"<code>normalize(returns, starting_value=1)</code>","text":"<p>Normalize a value series to start at <code>starting_value</code>.</p> <p>This scales the input series by its first value so that the resulting series starts at <code>starting_value</code>. This is commonly used to align equity curves from different strategies for comparison.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Value series (typically cumulative returns or prices).</p> \u200b\u5fc5\u9700\u200b <code>starting_value</code> <code>float</code> <p>Starting value after normalization. Default is 1.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Normalized series whose first value equals <code>starting_value</code>.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; returns = pd.Series([100, 110, 105, 115])\n&gt;&gt;&gt; normalize(returns, starting_value=1)\n0    1.00\n1    1.10\n2    1.05\n3    1.15\ndtype: float64\n</code></pre>"},{"location":"api/metrics/#drawdown","title":"Drawdown","text":""},{"location":"api/metrics/#fincore.metrics.drawdown","title":"<code>fincore.metrics.drawdown</code>","text":"<p>Drawdown-related metrics.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown","title":"<code>max_drawdown(returns, out=None)</code>","text":"<p>Determine the maximum drawdown of a return series.</p> <p>Maximum drawdown is defined as the minimum (most negative) percentage drop from a running maximum of cumulative returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If provided, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Maximum drawdown. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.get_all_drawdowns","title":"<code>get_all_drawdowns(returns)</code>","text":"<p>Extract all distinct drawdown values from a return series.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>list of float</code> <p>List of drawdown magnitudes (negative values) for each distinct drawdown period.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.get_all_drawdowns_detailed","title":"<code>get_all_drawdowns_detailed(returns)</code>","text":"<p>Extract detailed information about all drawdown periods.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>list of dict</code> <p>List of dictionaries with keys 'value', 'duration', 'recovery_duration' for each distinct drawdown period.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.get_max_drawdown","title":"<code>get_max_drawdown(returns)</code>","text":"<p>Determine the maximum drawdown of a strategy.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>peak</code> <code>datetime</code> <p>The date of the peak before the maximum drawdown.</p> <code>valley</code> <code>datetime</code> <p>The date of the trough (maximum drawdown).</p> <code>recovery</code> <code>datetime</code> <p>The date of recovery or NaT if not recovered.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.get_max_drawdown_underwater","title":"<code>get_max_drawdown_underwater(underwater)</code>","text":"<p>Determines peak, valley, and recovery dates given an underwater returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>underwater</code> <code>Series</code> <p>Underwater returns (cumulative returns minus rolling max).</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>peak</code> <code>datetime</code> <p>The date of the peak before the maximum drawdown.</p> <code>valley</code> <code>datetime</code> <p>The date of the trough (maximum drawdown).</p> <code>recovery</code> <code>datetime</code> <p>The date of recovery or NaT if not recovered.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.get_top_drawdowns","title":"<code>get_top_drawdowns(returns, top=10)</code>","text":"<p>Find top drawdowns, sorted by severity.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>top</code> <code>int</code> <p>The amount of top drawdowns to find (default 10).</p> <code>10</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>drawdowns</code> <code>list</code> <p>List of (peak, valley, recovery) tuples.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.gen_drawdown_table","title":"<code>gen_drawdown_table(returns, top=10)</code>","text":"<p>Place top drawdowns in a table.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>top</code> <code>int</code> <p>The amount of top drawdowns to find (default 10).</p> <code>10</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>df_drawdowns</code> <code>DataFrame</code> <p>Information about top drawdowns.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.get_max_drawdown_period","title":"<code>get_max_drawdown_period(returns)</code>","text":"<p>Get the start and end dates of the maximum drawdown period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>(Timestamp, Timestamp)</code> <p>Tuple <code>(start_date, end_date)</code> of the maximum drawdown period, or <code>(None, None)</code> if it cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown_days","title":"<code>max_drawdown_days(returns)</code>","text":"<p>Calculate the duration of the maximum drawdown in days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Number of days (or periods) between the peak and trough of the maximum drawdown, or <code>NaN</code> if it cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown_weeks","title":"<code>max_drawdown_weeks(returns)</code>","text":"<p>Calculate the duration of the maximum drawdown in weeks.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Number of weeks between the peak and trough of the maximum drawdown, or <code>NaN</code> if it cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown_months","title":"<code>max_drawdown_months(returns)</code>","text":"<p>Calculate the duration of the maximum drawdown in months.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Number of months between the peak and trough of the maximum drawdown, or <code>NaN</code> if it cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown_recovery_days","title":"<code>max_drawdown_recovery_days(returns)</code>","text":"<p>Calculate the recovery time from maximum drawdown in days.</p> <p>This computes the number of days (or periods) from the trough of the maximum drawdown until the portfolio value recovers to the previous peak.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Number of days (or periods) from the trough to recovery, or <code>NaN</code> if recovery does not occur or cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown_recovery_weeks","title":"<code>max_drawdown_recovery_weeks(returns)</code>","text":"<p>Calculate the recovery time from maximum drawdown in weeks.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Number of weeks from the trough to recovery, or <code>NaN</code> if recovery does not occur or cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.max_drawdown_recovery_months","title":"<code>max_drawdown_recovery_months(returns)</code>","text":"<p>Calculate the recovery time from maximum drawdown in months.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Number of months from the trough to recovery, or <code>NaN</code> if recovery does not occur or cannot be determined.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.second_max_drawdown","title":"<code>second_max_drawdown(returns)</code>","text":"<p>Determine the second-largest drawdown of a strategy.</p> <p>This identifies all distinct drawdown periods and returns the second-most severe (second-most negative) drawdown.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Second-largest drawdown, or <code>NaN</code> if there are fewer than two drawdown periods.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.third_max_drawdown","title":"<code>third_max_drawdown(returns)</code>","text":"<p>Determine the third-largest drawdown of a strategy.</p> <p>This identifies all distinct drawdown periods and returns the third-most severe (third-most negative) drawdown.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Third-largest drawdown, or <code>NaN</code> if there are fewer than three drawdown periods.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.second_max_drawdown_days","title":"<code>second_max_drawdown_days(returns)</code>","text":"<p>Calculate the duration of the second maximum drawdown in days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Number of days (or periods) between the peak and trough of the second-largest drawdown, or <code>NaN</code> if there are fewer than two drawdown periods.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.second_max_drawdown_recovery_days","title":"<code>second_max_drawdown_recovery_days(returns)</code>","text":"<p>Calculate the recovery time from the second maximum drawdown in days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Number of days from the trough to recovery for the second-largest drawdown, or <code>NaN</code> if recovery does not occur or there are fewer than two drawdown periods.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.third_max_drawdown_days","title":"<code>third_max_drawdown_days(returns)</code>","text":"<p>Calculate the duration of the third maximum drawdown in days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Number of days (or periods) between the peak and trough of the third-largest drawdown, or <code>NaN</code> if there are fewer than three drawdown periods.</p>"},{"location":"api/metrics/#fincore.metrics.drawdown.third_max_drawdown_recovery_days","title":"<code>third_max_drawdown_recovery_days(returns)</code>","text":"<p>Calculate the recovery time from the third maximum drawdown in days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or array - like</code> <p>Non-cumulative returns indexed by date or position.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Number of days from the trough to recovery for the third-largest drawdown, or <code>NaN</code> if recovery does not occur or there are fewer than three drawdown periods.</p>"},{"location":"api/metrics/#risk","title":"Risk","text":""},{"location":"api/metrics/#fincore.metrics.risk","title":"<code>fincore.metrics.risk</code>","text":"<p>Risk metrics.</p>"},{"location":"api/metrics/#fincore.metrics.risk.annual_volatility","title":"<code>annual_volatility(returns, period=DAILY, alpha_=2.0, annualization=None, out=None)</code>","text":"<p>Determine the annualized volatility of a return series.</p> <p>Volatility is computed as the standard deviation of returns scaled by an annualization factor based on <code>period</code> or <code>annualization</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>alpha_</code> <code>float</code> <p>Power used when scaling volatility (for example 2.0 for variance, 1.0 for standard deviation). Defaults to 2.0 to match the original empyrical implementation.</p> <code>2.0</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If provided, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Annualized volatility. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.risk.downside_risk","title":"<code>downside_risk(returns, required_return=0, period=DAILY, annualization=None, out=None)</code>","text":"<p>Determine the annualized downside deviation below a threshold.</p> <p>Downside risk is computed as the annualized standard deviation of returns that fall below <code>required_return</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>required_return</code> <code>float</code> <p>Minimum acceptable return threshold. Only returns below this value contribute to the downside risk. Default is 0.</p> <code>0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>Optional pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Annualized downside risk. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.risk.value_at_risk","title":"<code>value_at_risk(returns, cutoff=0.05)</code>","text":"<p>Calculate the (historical) value at risk (VaR) of returns.</p> <p>VaR is estimated as the <code>cutoff</code>-percentile of the return distribution.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>cutoff</code> <code>float</code> <p>Left-tail probability level in (0, 1). For example <code>0.05</code> selects the 5th percentile. Default is 0.05.</p> <code>0.05</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Historical VaR at the given confidence level, or <code>NaN</code> if there are no observations.</p>"},{"location":"api/metrics/#fincore.metrics.risk.conditional_value_at_risk","title":"<code>conditional_value_at_risk(returns, cutoff=0.05)</code>","text":"<p>Calculate the conditional value at risk (CVaR) of returns.</p> <p>CVaR (also known as Expected Shortfall) is the expected return conditional on the return being at or below the VaR threshold.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>cutoff</code> <code>float</code> <p>Left-tail probability level in (0, 1). Default is 0.05.</p> <code>0.05</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Conditional VaR (expected shortfall) at the given confidence level, or <code>NaN</code> if there are no observations.</p>"},{"location":"api/metrics/#fincore.metrics.risk.tail_ratio","title":"<code>tail_ratio(returns)</code>","text":"<p>Determine the ratio of right- to left-tail percentiles of returns.</p> <p>The tail ratio is defined as the absolute value of the 95th percentile divided by the absolute value of the 5th percentile.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Tail ratio, or <code>NaN</code> if there are no valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.risk.tracking_error","title":"<code>tracking_error(returns, factor_returns, period=DAILY, annualization=None, out=None)</code>","text":"<p>Determine the annualized tracking error versus a benchmark.</p> <p>Tracking error is defined as the annualized standard deviation of the active returns (strategy minus benchmark).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>Optional pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray</code> <p>Annualized tracking error. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.risk.residual_risk","title":"<code>residual_risk(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate annualized residual risk (idiosyncratic risk).</p> <p>Residual risk is the standard deviation of regression residuals from a single-factor regression of excess returns on benchmark excess returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Annualized residual risk, or <code>NaN</code> if there are fewer than two aligned observations.</p>"},{"location":"api/metrics/#fincore.metrics.risk.var_excess_return","title":"<code>var_excess_return(returns, cutoff=0.05, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the excess-return-on-VaR ratio.</p> <p>Defined as <code>(annualized_return - risk_free) / abs(VaR)</code>, where VaR is the historical Value at Risk at the given cutoff level.</p> <p>Reference: ER-VaR = (r_annual - rf) / |VaR|</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>cutoff</code> <code>float</code> <p>Left-tail probability level in (0, 1). Default is 0.05.</p> <code>0.05</code> <code>risk_free</code> <code>float</code> <p>Annual risk-free rate. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data. Default is <code>DAILY</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Excess-return-on-VaR ratio, or <code>NaN</code> if there are fewer than two observations or VaR is zero.</p>"},{"location":"api/metrics/#fincore.metrics.risk.var_cov_var_normal","title":"<code>var_cov_var_normal(p, c, mu=0, sigma=1)</code>","text":"<p>Calculate parametric Value at Risk using the normal distribution.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>p</code> <code>float</code> <p>Portfolio value.</p> \u200b\u5fc5\u9700\u200b <code>c</code> <code>float</code> <p>Confidence level (e.g., 0.99 for 99% VaR).</p> \u200b\u5fc5\u9700\u200b <code>mu</code> <code>float</code> <p>Expected return. Default is 0.</p> <code>0</code> <code>sigma</code> <code>float</code> <p>Standard deviation of returns. Default is 1.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Parametric VaR at the given confidence level.</p>"},{"location":"api/metrics/#fincore.metrics.risk.trading_value_at_risk","title":"<code>trading_value_at_risk(returns, period=None, sigma=2.0)</code>","text":"<p>Calculate trading Value at Risk.</p> <p>This computes a simplified VaR as <code>mean - sigma * std</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data. Currently unused.</p> <code>None</code> <code>sigma</code> <code>float</code> <p>Number of standard deviations to subtract from the mean. Default is 2.0.</p> <code>2.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Trading VaR, or <code>NaN</code> if there are fewer than two observations.</p>"},{"location":"api/metrics/#fincore.metrics.risk.gpd_risk_estimates","title":"<code>gpd_risk_estimates(returns, var_p=0.01)</code>","text":"<p>Estimate VaR and ES using the Generalized Pareto Distribution (GPD).</p> <p>This fits a GPD to the tail of the loss distribution and estimates VaR and Expected Shortfall (ES).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>var_p</code> <code>float</code> <p>Probability level for VaR/ES estimation. Default is 0.01.</p> <code>0.01</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray or Series</code> <p>Array of length 5 containing: <code>[threshold, scale_param, shape_param, var_estimate, es_estimate]</code>. Returns zeros if the estimation fails.</p>"},{"location":"api/metrics/#fincore.metrics.risk.gpd_risk_estimates_aligned","title":"<code>gpd_risk_estimates_aligned(returns, var_p=0.01)</code>","text":"<p>Calculate GPD risk estimates (aligned version for compatibility).</p> <p>This is a wrapper around :func:<code>gpd_risk_estimates</code> for API compatibility.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>var_p</code> <code>float</code> <p>Probability level for VaR/ES estimation. Default is 0.01.</p> <code>0.01</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray or Series</code> <p>Array of length 5 containing GPD risk estimates.</p>"},{"location":"api/metrics/#fincore.metrics.risk.beta_fragility_heuristic","title":"<code>beta_fragility_heuristic(returns, factor_returns)</code>","text":"<p>Estimate fragility to a drop in beta.</p> <p>This heuristic measures how fragile a strategy's returns are to changes in market conditions by comparing returns at different points in the factor return distribution.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Beta fragility heuristic, or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.risk.beta_fragility_heuristic_aligned","title":"<code>beta_fragility_heuristic_aligned(returns, factor_returns)</code>","text":"<p>Calculate the beta fragility heuristic with aligned series.</p> <p>This is a wrapper around :func:<code>beta_fragility_heuristic</code> for API compatibility.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Beta fragility heuristic, or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#ratios","title":"Ratios","text":""},{"location":"api/metrics/#fincore.metrics.ratios","title":"<code>fincore.metrics.ratios</code>","text":"<p>Ratio metrics (risk-adjusted returns, drawdown ratios, capture ratios, etc.).</p>"},{"location":"api/metrics/#fincore.metrics.ratios.sharpe_ratio","title":"<code>sharpe_ratio(returns, risk_free=0, period=DAILY, annualization=None, out=None)</code>","text":"<p>Determine the annualized Sharpe ratio of a strategy.</p> <p>The Sharpe ratio is defined as the annualized mean excess return divided by the annualized standard deviation of returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.</p> <code>0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If provided, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Annualized Sharpe ratio. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.sortino_ratio","title":"<code>sortino_ratio(returns, required_return=0, period=DAILY, annualization=None, out=None, _downside_risk=None)</code>","text":"<p>Determine the Sortino ratio of a strategy.</p> <p>The Sortino ratio is defined as the annualized excess return divided by the annualized downside risk. Only returns falling below <code>required_return</code> contribute to the downside risk term.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>required_return</code> <code>float</code> <p>Minimum acceptable return used as the threshold when computing downside risk. Default is 0.</p> <code>0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>Optional pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <code>_downside_risk</code> <code>float or ndarray</code> <p>Optional pre-computed annualized downside risk. If provided, this value is reused instead of recomputing downside risk.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Sortino ratio of the strategy. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.excess_sharpe","title":"<code>excess_sharpe(returns, factor_returns, out=None)</code>","text":"<p>Determine the excess Sharpe ratio of a strategy.</p> <p>The excess Sharpe ratio is defined as the mean active return divided by the tracking error, where active return is the difference between the strategy returns and the benchmark (factor) returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative benchmark or factor returns, aligned to <code>returns</code>.</p> \u200b\u5fc5\u9700\u200b <code>out</code> <code>ndarray</code> <p>Optional pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Excess Sharpe ratio. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.adjusted_sharpe_ratio","title":"<code>adjusted_sharpe_ratio(returns, risk_free=0.0)</code>","text":"<p>Calculate the adjusted Sharpe ratio.</p> <p>This version of the Sharpe ratio applies a correction for skewness and kurtosis of the return distribution, following the standard approximation with additional dampening for small sample sizes.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Adjusted Sharpe ratio that accounts for non-normality. Returns <code>NaN</code> when there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.conditional_sharpe_ratio","title":"<code>conditional_sharpe_ratio(returns, cutoff=0.05, risk_free=0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the Sharpe ratio conditional on the left tail.</p> <p>The conditional Sharpe ratio is computed on the subset of returns that fall below a given quantile of the full return distribution.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>cutoff</code> <code>float</code> <p>Left-tail probability level in (0, 1). For example <code>0.05</code> selects the worst 5% of returns. Default is 0.05.</p> <code>0.05</code> <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.</p> <code>0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Sharpe ratio computed on the conditional (left-tail) subsample, annualized. Returns <code>NaN</code> if there are fewer than two observations.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.calmar_ratio","title":"<code>calmar_ratio(returns, risk_free=0, period=DAILY, annualization=None)</code>","text":"<p>Determine the Calmar ratio (return-to-drawdown ratio).</p> <p>The Calmar ratio is defined as the annualized excess return divided by the absolute value of the maximum drawdown.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.</p> <code>0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to annualize returns when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Calmar ratio of the return series. Returns <code>NaN</code> if maximum drawdown is non-negative or infinite.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.mar_ratio","title":"<code>mar_ratio(returns, period=DAILY, annualization=None)</code>","text":"<p>Calculate the MAR ratio.</p> <p>The MAR ratio is defined as the arithmetic mean annualized return divided by the absolute value of the maximum drawdown.</p> <p>Unlike the Calmar ratio (which uses CAGR), the MAR ratio uses <code>mean(returns) \u00d7 annualization_factor</code> as the numerator.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data. Default is <code>DAILY</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>MAR ratio, or <code>NaN</code> if the maximum drawdown is non-negative.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.omega_ratio","title":"<code>omega_ratio(returns, risk_free=0.0, required_return=0.0, annualization=APPROX_BDAYS_PER_YEAR)</code>","text":"<p>Determine the Omega ratio of a strategy.</p> <p>The Omega ratio is the probability-weighted ratio of gains over losses relative to a threshold :math:<code>\\tau</code>.  In discrete form:</p> <p>.. math::</p> <pre><code>\\Omega(\\tau) = \\frac{\\sum \\max(R_t - \\tau,\\; 0)}\n                    {\\sum \\max(\\tau - R_t,\\; 0)}\n</code></pre> <p>The effective per-period threshold is computed as :math:<code>\\tau = \\text{risk\\_free} + (1 + \\text{required\\_return})^{1/q} - 1</code>, where q is the <code>annualization</code> factor.</p> Reference <p>https://breakingdownfinance.com/finance-topics/performance-measurement/omega-ratio/</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Per-period risk-free rate added to the threshold. Default is 0.0.</p> <code>0.0</code> <code>required_return</code> <code>float</code> <p>Annualized minimum acceptable return (MAR). It is converted to a per-period rate via compound de-annualization before being added to <code>risk_free</code> to form the effective threshold :math:<code>\\tau</code>. Default is 0.0.</p> <code>0.0</code> <code>annualization</code> <code>float</code> <p>Number of periods per year used when de-annualizing <code>required_return</code> (for example trading days per year). Default is <code>APPROX_BDAYS_PER_YEAR</code>.</p> <code>APPROX_BDAYS_PER_YEAR</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Omega ratio of the strategy. Returns <code>NaN</code> if there are fewer than two observations or if the downside component is zero.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.information_ratio","title":"<code>information_ratio(returns, factor_returns, period=DAILY, annualization=None)</code>","text":"<p>Determine the information ratio versus a benchmark.</p> <p>The information ratio is defined as the annualized mean active return divided by the annualized tracking error of the active returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or DataFrame</code> <p>Non-cumulative benchmark or factor returns, aligned to <code>returns</code>.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or Series</code> <p>Information ratio of the strategy versus the benchmark.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.cal_treynor_ratio","title":"<code>cal_treynor_ratio(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the Treynor ratio of a strategy.</p> <p>The Treynor ratio is defined as the strategy's annualized excess return divided by its beta with respect to a benchmark:</p> <p>.. math::</p> <pre><code>T = \\frac{R_p - R_f}{\\beta_p}\n</code></pre> <p>where :math:<code>R_p</code> is the annualized portfolio return, :math:<code>R_f</code> is the risk-free rate, and :math:<code>\\beta_p</code> is the portfolio beta.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark or factor returns used to estimate beta.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to annualize returns when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Treynor ratio. For 1D input a scalar is returned; for 2D input one value is returned per column. Returns <code>NaN</code> when beta is zero, negative, or <code>NaN</code>.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.treynor_ratio","title":"<code>treynor_ratio(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Compute the Treynor ratio.</p> <p>This is a thin wrapper around :func:<code>cal_treynor_ratio</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data. Default is <code>DAILY</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Treynor ratio.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.m_squared","title":"<code>m_squared(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the Modigliani (M\u00b2) measure.</p> <p>The M\u00b2 measure scales the portfolio's risk-adjusted performance to the benchmark's volatility. It is defined as:</p> <p>.. math::</p> <pre><code>M^2 = (R_p - R_f) \\frac{\\sigma_b}{\\sigma_p} + R_f\n</code></pre> <p>where :math:<code>R_p</code> and :math:<code>R_f</code> are the annualized portfolio and risk-free returns, and :math:<code>\\sigma_p</code> and :math:<code>\\sigma_b</code> are the annualized volatilities of the portfolio and benchmark, respectively.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to annualize returns and volatilities when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>M\u00b2 value of the strategy relative to the benchmark. Returns <code>NaN</code> if the portfolio volatility is zero, negative, or <code>NaN</code>.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.sterling_ratio","title":"<code>sterling_ratio(returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the Sterling ratio of a strategy.</p> <p>The Sterling ratio is defined as the annualized excess return divided by the average drawdown. When no explicit drawdowns are detected, this implementation falls back to using downside returns as a proxy for risk.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to annualize returns when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Sterling ratio of the strategy. Returns <code>NaN</code> when there is effectively no drawdown risk.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.burke_ratio","title":"<code>burke_ratio(returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the Burke ratio of a strategy.</p> <p>The Burke ratio is defined as the annualized excess return divided by the square root of the sum of squared drawdowns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to annualize returns when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Burke ratio of the strategy. Returns <code>NaN</code> when there is effectively no drawdown risk.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.kappa_three_ratio","title":"<code>kappa_three_ratio(returns, risk_free=0.0, period=DAILY, annualization=None, mar=0.0)</code>","text":"<p>Calculate the Kappa 3 ratio based on third-order lower partial moment.</p> <p>The Kappa ratio uses the n-th order Lower Partial Moment (LPM) as the risk measure.  For Kappa 3 the formula is:</p> <p>.. math::</p> <pre><code>K_3(\\tau) = \\frac{\\mu - \\tau}{\\sqrt[3]{LPM_3(\\tau)}}\n</code></pre> <p>where :math:<code>\\mu</code> is the arithmetic mean of returns, :math:<code>\\tau</code> is the threshold (MAR), and</p> <p>.. math::</p> <pre><code>LPM_3(\\tau) = \\frac{1}{T}\\sum_{t=1}^{T}\\max(\\tau - R_t, 0)^3\n</code></pre> Reference <p>https://breakingdownfinance.com/finance-topics/performance-measurement/kappa-ratio/</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Kept for API compatibility. Not used in the current formula. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Kept for API compatibility. Not used in the current formula.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Kept for API compatibility. Not used in the current formula.</p> <code>None</code> <code>mar</code> <code>float</code> <p>Minimum acceptable return (MAR), used as the threshold :math:<code>\\tau</code> in both the numerator and the LPM. Default is 0.0.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Kappa 3 ratio of the strategy. Returns <code>NaN</code> when there is insufficient data or downside risk is effectively zero.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.deflated_sharpe_ratio","title":"<code>deflated_sharpe_ratio(returns, risk_free=0, num_trials=1, period=DAILY, annualization=None)</code>","text":"<p>Calculate the Deflated Sharpe Ratio (DSR).</p> <p>The DSR tests whether the observed Sharpe ratio is statistically significant after correcting for:</p> <ol> <li>Non-normality of returns (skewness and kurtosis).</li> <li>Finite sample length.</li> <li>Multiple testing (number of strategies tried).</li> </ol> <p>It is computed in two steps:</p> <p>Step 1 \u2014 Expected maximum Sharpe ratio under the null hypothesis:</p> <p>.. math::</p> <pre><code>\\widehat{SR}_0 \\approx \\sqrt{2 \\ln N}\n- \\frac{\\ln(\\pi) + \\ln(\\ln N)}{2\\sqrt{2 \\ln N}}\n</code></pre> <p>where N is the number of independent trials (strategies tested).</p> <p>Step 2 \u2014 Probabilistic Sharpe Ratio (PSR) evaluated at :math:<code>SR^* = \\widehat{SR}_0</code>:</p> <p>.. math::</p> <pre><code>DSR = PSR(SR^*) = \\Phi\\!\\left(\n    \\frac{(\\widehat{SR} - SR^*)\\,\\sqrt{T-1}}\n         {\\sqrt{1 - \\hat{\\gamma}_3\\,\\widehat{SR}\n                + \\frac{\\hat{\\gamma}_4 - 1}{4}\\,\\widehat{SR}^2}}\n\\right)\n</code></pre> <p>where :math:<code>\\widehat{SR}</code> is the observed (non-annualized) Sharpe ratio, T is the sample size, :math:<code>\\hat{\\gamma}_3</code> is the sample skewness, :math:<code>\\hat{\\gamma}_4</code> is the sample excess kurtosis, and :math:<code>\\Phi</code> is the standard-normal CDF.</p> <p>A DSR close to 1 indicates the observed Sharpe ratio is unlikely to be the result of luck; a DSR close to 0 suggests the opposite.</p> Reference <ul> <li>Bailey, D. and M. L\u00f3pez de Prado (2014). \"The Deflated Sharpe   Ratio: Correcting for Selection Bias, Backtest Over-fitting, and   Non-Normality.\" Journal of Portfolio Management, 40(5), 94\u2013107.</li> <li>https://en.wikipedia.org/wiki/Deflated_Sharpe_ratio</li> </ul> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Per-period risk-free rate. Default is 0.</p> <code>0</code> <code>num_trials</code> <code>int</code> <p>Number of independent strategy trials (backtests) that were conducted.  Used to estimate the expected maximum Sharpe ratio under the null.  Default is 1 (no multiple-testing correction).</p> <code>1</code> <code>period</code> <code>str</code> <p>Kept for API consistency. Not used in the current formula since the DSR operates on per-period (non-annualized) Sharpe ratios.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Kept for API consistency. Not used in the current formula.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>The Deflated Sharpe Ratio, a probability in [0, 1]. Returns <code>NaN</code> if there are fewer than 3 observations.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.common_sense_ratio","title":"<code>common_sense_ratio(returns)</code>","text":"<p>Calculate the common sense ratio.</p> <p>The common sense ratio combines the tail ratio with the win rate to provide a measure of the risk-reward profile of a strategy.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Common sense ratio. Returns <code>NaN</code> if there are insufficient observations or if win rate is zero.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.stability_of_timeseries","title":"<code>stability_of_timeseries(returns)</code>","text":"<p>Determine the R-squared of a linear fit to cumulative log returns.</p> <p>This computes the coefficient of determination (R^2) from a linear regression of the cumulative log returns against time. Higher values indicate a more stable (less noisy) growth profile.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>R-squared of the linear fit to cumulative log returns. Returns <code>NaN</code> if there are fewer than two valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.capture","title":"<code>capture(returns, factor_returns, period=DAILY)</code>","text":"<p>Calculate the capture ratio versus a benchmark.</p> <p>The capture ratio is defined as the strategy's annualized return divided by the benchmark's annualized return over the same period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to annualize both strategy and benchmark returns.</p> <code>DAILY</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Capture ratio (strategy annualized return divided by benchmark annualized return). Returns <code>NaN</code> if there are insufficient observations or the benchmark annualized return is zero.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.up_capture","title":"<code>up_capture(returns, factor_returns, period=DAILY)</code>","text":"<p>Calculate the capture ratio for up-market periods.</p> <p>The up-capture ratio is defined as the capture ratio computed using only those periods where the benchmark (factor) return is positive.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Up-capture ratio of the strategy relative to the benchmark. Returns <code>NaN</code> if there are no positive benchmark periods.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.down_capture","title":"<code>down_capture(returns, factor_returns, period=DAILY)</code>","text":"<p>Calculate the capture ratio for down-market periods.</p> <p>The down-capture ratio is defined as the capture ratio computed using only those periods where the benchmark (factor) return is negative.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Down-capture ratio of the strategy relative to the benchmark. Returns <code>NaN</code> if there are no negative benchmark periods.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.up_down_capture","title":"<code>up_down_capture(returns, factor_returns, period=DAILY)</code>","text":"<p>Calculate the ratio of up-capture to down-capture.</p> <p>This computes <code>up_capture / down_capture</code> using :func:<code>up_capture</code> and :func:<code>down_capture</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Ratio of up-capture to down-capture. Returns <code>NaN</code> if either capture is <code>NaN</code> or if the down-capture is zero.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.up_capture_return","title":"<code>up_capture_return(returns, factor_returns, period=DAILY, annualization=None)</code>","text":"<p>Calculate the annualized return during up-market periods.</p> <p>This computes the annualized return of the strategy using only those periods where the benchmark return is positive.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data. Default is <code>DAILY</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Annualized strategy return during up-market periods, or <code>NaN</code> if there are no positive benchmark periods.</p>"},{"location":"api/metrics/#fincore.metrics.ratios.down_capture_return","title":"<code>down_capture_return(returns, factor_returns, period=DAILY, annualization=None)</code>","text":"<p>Calculate the annualized return during down-market periods.</p> <p>This computes the annualized return of the strategy using only those periods where the benchmark return is negative.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data. Default is <code>DAILY</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Annualized strategy return during down-market periods, or <code>NaN</code> if there are no negative benchmark periods.</p>"},{"location":"api/metrics/#alpha-beta","title":"Alpha &amp; Beta","text":""},{"location":"api/metrics/#fincore.metrics.alpha_beta","title":"<code>fincore.metrics.alpha_beta</code>","text":"<p>Alpha/beta related metrics.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.beta_aligned","title":"<code>beta_aligned(returns, factor_returns, risk_free=0.0, out=None)</code>","text":"<p>Calculate beta for already-aligned data.</p> <p>This function assumes that <code>returns</code> and <code>factor_returns</code> are already aligned NumPy arrays (or array-like) with matching shapes along the time dimension. Beta is estimated using the covariance of excess returns divided by the variance of excess factor returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>ndarray</code> <p>Array of non-cumulative strategy returns. The first dimension is interpreted as time; any remaining dimensions correspond to different assets/strategies.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>ndarray</code> <p>Array of non-cumulative benchmark or factor returns, aligned with <code>returns</code> along the time dimension.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray</code> <p>Beta of the strategy versus the benchmark. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.alpha_aligned","title":"<code>alpha_aligned(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None, out=None, _beta=None)</code>","text":"<p>Calculate annualized alpha for already-aligned series.</p> <p>This function assumes that <code>returns</code> and <code>factor_returns</code> are already aligned NumPy arrays (or array-like) with matching shapes along the time dimension.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>ndarray</code> <p>Array of non-cumulative strategy returns. The first dimension is interpreted as time; any remaining dimensions correspond to different assets/strategies.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>ndarray</code> <p>Array of non-cumulative benchmark or factor returns, aligned with <code>returns</code> along the time dimension.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <code>_beta</code> <code>float or ndarray</code> <p>pre-computed beta used to avoid recomputing beta internally.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Annualized alpha of the strategy versus the benchmark. For 1D input a scalar is returned; for higher-dimensional input one value is returned per series.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.alpha_beta_aligned","title":"<code>alpha_beta_aligned(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None, out=None)</code>","text":"<p>Calculate annualized alpha and beta for already-aligned series.</p> <p>This function assumes that <code>returns</code> and <code>factor_returns</code> are already aligned NumPy arrays (or array-like) with matching shapes along the time dimension.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>ndarray</code> <p>Array of non-cumulative strategy returns. The first dimension is interpreted as time; any remaining dimensions correspond to different assets/strategies.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>ndarray</code> <p>Array of non-cumulative benchmark or factor returns, aligned with <code>returns</code> along the time dimension.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array of shape <code>returns.shape[1:] + (2),</code>. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Array of shape <code>returns.shape[1:] + (2),</code> whose last dimension contains <code>[alpha, beta]</code>.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.beta","title":"<code>beta(returns, factor_returns, risk_free=0.0, _period=DAILY, _annualization=None, out=None)</code>","text":"<p>Calculate beta versus a benchmark.</p> <p>This mirrors <code>empyrical.stats.beta</code>: non-ndarray inputs are first aligned, then :func:<code>beta_aligned</code> is called to compute the beta.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>_period</code> <code>str</code> <p>Deprecated. Kept for API compatibility and ignored.</p> <code>DAILY</code> <code>_annualization</code> <code>float</code> <p>Deprecated. Kept for API compatibility and ignored.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Beta of the strategy versus the benchmark. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.alpha","title":"<code>alpha(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None, out=None, _beta=None)</code>","text":"<p>Calculate annualized alpha versus a benchmark.</p> <p>This mirrors <code>empyrical.stats.alpha</code>: non-ndarray inputs are first aligned, then :func:<code>alpha_aligned</code> is called to compute the annualized alpha.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <code>_beta</code> <code>float or ndarray</code> <p>pre-computed beta used to avoid recomputing beta internally. Primarily intended for internal reuse.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Annualized alpha of the strategy versus the benchmark. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.alpha_beta","title":"<code>alpha_beta(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None, out=None)</code>","text":"<p>Calculate annualized alpha and beta versus a benchmark.</p> <p>This is a convenience wrapper that aligns <code>returns</code> and <code>factor_returns</code> (if they are not already NumPy arrays) and then delegates to :func:<code>alpha_beta_aligned</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative benchmark or factor returns, aligned to <code>returns</code> after preprocessing.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated output array. If given, the result is written in-place into this array.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Array of shape <code>(..., 2)</code> containing annualized alpha and beta in the last dimension. For 1D inputs this is length-2; for 2D inputs it has one row per column of <code>returns</code>.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.up_alpha_beta","title":"<code>up_alpha_beta(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None, out=None)</code>","text":"<p>Calculate alpha and beta for up-market periods only.</p> <p>This helper restricts the sample to periods where the benchmark (factor) return is positive and then estimates alpha and beta using a single-factor model on excess returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated array of length 2, where index 0 receives alpha and index 1 receives beta.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Array <code>[alpha, beta]</code> for up-market periods. Elements are <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.down_alpha_beta","title":"<code>down_alpha_beta(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None, out=None)</code>","text":"<p>Calculate alpha and beta for down-market periods only.</p> <p>This helper restricts the sample to periods where the benchmark (factor) return is non-positive and then estimates alpha and beta using a single-factor model on excess returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <code>out</code> <code>ndarray</code> <p>pre-allocated array of length 2, where index 0 receives alpha and index 1 receives beta.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Array <code>[alpha, beta]</code> for down-market periods. Elements are <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.annual_alpha","title":"<code>annual_alpha(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Determine the annual alpha for each calendar year.</p> <p>This groups aligned strategy and benchmark returns by calendar year and computes :func:<code>alpha</code> for each year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Annual alpha by calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.annual_beta","title":"<code>annual_beta(returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Determine the annual beta for each calendar year.</p> <p>This groups aligned strategy and benchmark returns by calendar year and computes :func:<code>beta</code> for each year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Annual beta by calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.alpha_beta.alpha_percentile_rank","title":"<code>alpha_percentile_rank(strategy_returns, all_strategies_returns, factor_returns, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate the percentile rank of alpha versus a peer universe.</p> <p>This computes the strategy's alpha and compares it to the alphas of all peer strategies, returning the percentile rank.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>strategy_returns</code> <code>Series</code> <p>Non-cumulative returns of the strategy being evaluated.</p> \u200b\u5fc5\u9700\u200b <code>all_strategies_returns</code> <code>list of pd.Series</code> <p>Non-cumulative returns of all peer strategies.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate (default 0.0).</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Percentile rank of the strategy's alpha in [0, 1], or <code>NaN</code> if insufficient data.</p>"},{"location":"api/metrics/#rolling","title":"Rolling","text":""},{"location":"api/metrics/#fincore.metrics.rolling","title":"<code>fincore.metrics.rolling</code>","text":"<p>Rolling-window metrics.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_alpha","title":"<code>roll_alpha(returns, factor_returns, window=252, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate rolling alpha over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns to calculate alpha against.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <code>risk_free</code> <code>float</code> <p>Risk-free rate (default 0.0).</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling alpha values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_beta","title":"<code>roll_beta(returns, factor_returns, window=252, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate rolling beta over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns to calculate beta against.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <code>risk_free</code> <code>float</code> <p>Risk-free rate (default 0.0).</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling beta values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_alpha_beta","title":"<code>roll_alpha_beta(returns, factor_returns, window=252, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate rolling alpha and beta over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns to calculate alpha and beta against.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <code>risk_free</code> <code>float</code> <p>Risk-free rate (default 0.0).</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame or ndarray</code> <p>Rolling alpha and beta values with columns ['alpha', 'beta'].</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_sharpe_ratio","title":"<code>roll_sharpe_ratio(returns, window=252, risk_free=0.0, period=DAILY, annualization=None)</code>","text":"<p>Calculate rolling Sharpe ratio over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <code>risk_free</code> <code>float</code> <p>Risk-free rate (default 0.0).</p> <code>0.0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling Sharpe ratio values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_max_drawdown","title":"<code>roll_max_drawdown(returns, window=252)</code>","text":"<p>Calculate rolling maximum drawdown over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling maximum drawdown values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_up_capture","title":"<code>roll_up_capture(returns, factor_returns, window=252)</code>","text":"<p>Calculate rolling up capture over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling up capture values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_down_capture","title":"<code>roll_down_capture(returns, factor_returns, window=252)</code>","text":"<p>Calculate rolling down capture over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling down capture values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.roll_up_down_capture","title":"<code>roll_up_down_capture(returns, factor_returns, window=252)</code>","text":"<p>Calculate rolling up/down capture ratio over a specified window.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns.</p> \u200b\u5fc5\u9700\u200b <code>window</code> <code>int</code> <p>Length of the rolling window (default 252).</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Rolling up/down capture ratio values.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.rolling_volatility","title":"<code>rolling_volatility(returns, rolling_vol_window, period=DAILY, annualization=None)</code>","text":"<p>Determine the rolling volatility of a strategy.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>rolling_vol_window</code> <code>int</code> <p>Length of the rolling window.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Rolling volatility, annualized.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.rolling_sharpe","title":"<code>rolling_sharpe(returns, rolling_sharpe_window, period=DAILY, annualization=None)</code>","text":"<p>Determine the rolling Sharpe ratio of a strategy.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns of the strategy.</p> \u200b\u5fc5\u9700\u200b <code>rolling_sharpe_window</code> <code>int</code> <p>Length of the rolling window.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Rolling Sharpe ratio, annualized.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.rolling_beta","title":"<code>rolling_beta(returns, factor_returns, rolling_window=126)</code>","text":"<p>Calculate rolling beta.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or DataFrame</code> <p>Daily noncumulative returns of the benchmark factor.</p> \u200b\u5fc5\u9700\u200b <code>rolling_window</code> <code>int</code> <p>The size of the rolling window, in days (default 126).</p> <code>126</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Rolling beta.</p>"},{"location":"api/metrics/#fincore.metrics.rolling.rolling_regression","title":"<code>rolling_regression(returns, factor_returns, rolling_window=126)</code>","text":"<p>Calculate rolling regression alpha and beta.</p> <p>Note: The alpha returned here is the non-annualized (daily-frequency) regression intercept, unlike <code>roll_alpha</code> which returns annualized alpha. To annualize, multiply by the appropriate annualization factor (e.g. 252 for daily data).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Daily returns of the benchmark factor.</p> \u200b\u5fc5\u9700\u200b <code>rolling_window</code> <code>int</code> <p>Length of the rolling window (default 126).</p> <code>126</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Rolling alpha (non-annualized) and beta values with columns ['alpha', 'beta'].</p>"},{"location":"api/metrics/#statistics","title":"Statistics","text":""},{"location":"api/metrics/#fincore.metrics.stats","title":"<code>fincore.metrics.stats</code>","text":"<p>Statistical metrics.</p>"},{"location":"api/metrics/#fincore.metrics.stats.skewness","title":"<code>skewness(returns)</code>","text":"<p>Calculate the skewness of a return series.</p> <p>This is a thin wrapper around :func:<code>scipy.stats.skew</code> with <code>nan_policy=\"omit\"</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Sample skewness of the return distribution, or <code>NaN</code> if there are fewer than three observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.kurtosis","title":"<code>kurtosis(returns)</code>","text":"<p>Calculate the kurtosis of a return series.</p> <p>This is a thin wrapper around :func:<code>scipy.stats.kurtosis</code> with <code>nan_policy=\"omit\"</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Sample excess kurtosis of the return distribution, or <code>NaN</code> if there are fewer than four observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.hurst_exponent","title":"<code>hurst_exponent(returns)</code>","text":"<p>Estimate the Hurst exponent of a return series.</p> <p>The Hurst exponent is estimated via a rescaled range (R/S) analysis with safeguards for short and noisy series. Values near 0.5 indicate a random walk; values above 0.5 suggest persistence; values below 0.5 suggest mean reversion.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Estimated Hurst exponent in the interval [0, 1], or <code>NaN</code> when there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.stats.stutzer_index","title":"<code>stutzer_index(returns, target_return=0.0)</code>","text":"<p>Calculate the Stutzer index.</p> <p>The Stutzer index is a downside-risk-adjusted performance measure based on an exponential tilting of the return distribution.</p> Formula <p>I_P = max_\u03b8 { -log(mean(exp(\u03b8 \u00d7 r_t))) } Stutzer = (|r\u0304| / r\u0304) \u00d7 sqrt(2 \u00d7 I_P)</p> <p>where r_t are the excess returns and r\u0304 is their mean.</p> <p>Reference: Stutzer, M. (2000). \"A Portfolio Performance Index.\" Financial Analysts Journal, 56(3), 52-61.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>target_return</code> <code>float</code> <p>Target or benchmark return used to compute excess returns.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Stutzer index estimate, or <code>NaN</code> if the optimization fails or there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.stats.serial_correlation","title":"<code>serial_correlation(returns, lag=1)</code>","text":"<p>Determine the serial correlation of returns.</p> <p>This computes the correlation between <code>r[t]</code> and <code>r[t-lag]</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>lag</code> <code>int</code> <p>Number of periods to lag. Default is 1.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Pearson correlation coefficient between returns and lagged returns, or <code>NaN</code> if there are fewer than <code>lag + 1</code> valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.stock_market_correlation","title":"<code>stock_market_correlation(returns, market_returns)</code>","text":"<p>Determine the correlation between strategy and stock market returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>market_returns</code> <code>array - like or Series</code> <p>Non-cumulative stock market (benchmark) returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Pearson correlation coefficient in <code>[-1, 1]</code> between strategy and market returns, or <code>NaN</code> if there are fewer than two valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.bond_market_correlation","title":"<code>bond_market_correlation(returns, bond_returns)</code>","text":"<p>Determine the correlation between strategy and bond market returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>bond_returns</code> <code>array - like or Series</code> <p>Non-cumulative bond market benchmark returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Pearson correlation coefficient in <code>[-1, 1]</code> between strategy and bond market returns, or <code>NaN</code> if there are fewer than two valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.futures_market_correlation","title":"<code>futures_market_correlation(returns, futures_returns)</code>","text":"<p>Determine the correlation between strategy and futures market returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>futures_returns</code> <code>array - like or Series</code> <p>Non-cumulative futures market benchmark returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Pearson correlation coefficient in <code>[-1, 1]</code> between strategy and futures market returns, or <code>NaN</code> if there are fewer than two valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.win_rate","title":"<code>win_rate(returns)</code>","text":"<p>Calculate the percentage of positive return observations.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Fraction of observations with strictly positive returns in <code>[0, 1]</code>, or <code>NaN</code> if there are no valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.loss_rate","title":"<code>loss_rate(returns)</code>","text":"<p>Calculate the percentage of negative return observations.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Fraction of observations with strictly negative returns in <code>[0, 1]</code>, or <code>NaN</code> if there are no valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.relative_win_rate","title":"<code>relative_win_rate(returns, factor_returns)</code>","text":"<p>Calculate the win rate of strategy returns relative to a benchmark.</p> <p>The relative win rate is the fraction of periods where the strategy return exceeds the benchmark return.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Fraction of observations where <code>returns &gt; factor_returns</code> in <code>[0, 1]</code>, or <code>NaN</code> if there are no valid observations.</p>"},{"location":"api/metrics/#fincore.metrics.stats.r_cubed","title":"<code>r_cubed(returns, factor_returns)</code>","text":"<p>Calculate the R-cubed (R\u00b3) measure.</p> <p>R\u00b3 is defined as the cube of the correlation between strategy returns and benchmark returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Cube of the Pearson correlation coefficient, or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.stats.r_cubed_turtle","title":"<code>r_cubed_turtle(returns, period=DAILY, annualization=None)</code>","text":"<p>Calculate the R-cubed measure from the Turtle Trading system.</p> <p>R\u00b3 (turtle) is defined as the Regression Annual Return (RAR) divided by the average maximum annual drawdown.</p> <p>RAR is the slope of a linear regression of cumulative NAV against time, annualized.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data. Default is <code>DAILY</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>R\u00b3 turtle measure, or <code>NaN</code> if insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.stats.capm_r_squared","title":"<code>capm_r_squared(returns, factor_returns)</code>","text":"<p>Calculate the CAPM R-squared.</p> <p>R\u00b2 = (\u03b2 \u00d7 \u03c3_B / \u03c3_P)\u00b2, measuring the proportion of strategy return variance explained by market (systematic) risk.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>CAPM R-squared in <code>[0, 1]</code>, or <code>NaN</code> if insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.stats.tracking_difference","title":"<code>tracking_difference(returns, factor_returns)</code>","text":"<p>Calculate tracking difference in cumulative returns.</p> <p>Tracking difference is defined as the cumulative strategy return minus the cumulative benchmark return over the full sample.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or factor returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Difference between cumulative strategy and benchmark returns.</p>"},{"location":"api/metrics/#fincore.metrics.stats.common_sense_ratio","title":"<code>common_sense_ratio(returns)</code>","text":"<p>Calculate the common sense ratio.</p> <p>Delegates to :func:<code>fincore.metrics.ratios.common_sense_ratio</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Common sense ratio, or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.stats.var_cov_var_normal","title":"<code>var_cov_var_normal(p, c, mu=0, sigma=1)</code>","text":"<p>Calculate variance-covariance of daily Value-at-Risk in a portfolio.</p> <p>Delegates to :func:<code>fincore.metrics.risk.var_cov_var_normal</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>p</code> <code>float</code> <p>Portfolio value.</p> \u200b\u5fc5\u9700\u200b <code>c</code> <code>float</code> <p>Confidence level.</p> \u200b\u5fc5\u9700\u200b <code>mu</code> <code>float</code> <p>Mean. Default is 0.</p> <code>0</code> <code>sigma</code> <code>float</code> <p>Standard deviation. Default is 1.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Value-at-Risk.</p>"},{"location":"api/metrics/#fincore.metrics.stats.normalize","title":"<code>normalize(returns, starting_value=1)</code>","text":"<p>Normalize a returns series to start at a given value.</p> <p>Delegates to :func:<code>fincore.metrics.returns.normalize</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>starting_value</code> <code>float</code> <p>Starting value for the normalized series. Default is 1.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Normalized cumulative returns starting at <code>starting_value</code>.</p>"},{"location":"api/metrics/#performance-stats","title":"Performance Stats","text":""},{"location":"api/metrics/#fincore.metrics.perf_stats","title":"<code>fincore.metrics.perf_stats</code>","text":"<p>Performance statistics (summary tables, bootstrap stats, etc.).</p>"},{"location":"api/metrics/#fincore.metrics.perf_stats.perf_stats","title":"<code>perf_stats(returns, factor_returns=None, positions=None, transactions=None, turnover_denom='AGB', period=DAILY)</code>","text":"<p>Calculate various performance metrics of a strategy.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Daily noncumulative returns of the benchmark factor to which betas are computed. Usually a benchmark such as market returns.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Daily net position values.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Prices and amounts of executed trades. One row per trade.</p> <code>None</code> <code>turnover_denom</code> <code>str</code> <p>Either 'AGB' or 'portfolio_value', default 'AGB'.</p> <code>'AGB'</code> <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>).</p> <code>DAILY</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Performance metrics.</p>"},{"location":"api/metrics/#fincore.metrics.perf_stats.perf_stats_bootstrap","title":"<code>perf_stats_bootstrap(returns, factor_returns=None, return_stats=True, **_kwargs)</code>","text":"<p>Calculate various bootstrapped performance metrics of a strategy.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Daily noncumulative returns of the benchmark factor to which betas are computed. Usually a benchmark such as market returns.</p> <code>None</code> <code>return_stats</code> <code>bool</code> <p>If True, returns a DataFrame of mean, median, 5 and 95 percentiles for each perf metric. If False, return a DataFrame with the bootstrap samples for each perf metric.</p> <code>True</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>if return_stats is True: - Distributional statistics of bootstrapped sampling distribution of performance metrics. If return_stats is False: - Bootstrap samples for each performance metric.</p>"},{"location":"api/metrics/#fincore.metrics.perf_stats.calc_bootstrap","title":"<code>calc_bootstrap(func, returns, *args, **kwargs)</code>","text":"<p>Perform a bootstrap analysis on a user-defined function returning a summary statistic.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>func</code> <code>callable</code> <p>Function that either takes a single array (commonly <code>returns</code>) or two arrays (for example <code>returns</code> and <code>factor_returns</code>) and returns a single summary value.</p> \u200b\u5fc5\u9700\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <code>n_samples</code> <code>int</code> <p>Number of bootstrap samples to draw. Default is 1000.</p> \u200b\u5fc5\u9700\u200b <code>random_seed</code> <code>int</code> <p>Seed for the pseudorandom number generator to make results reproducible. Default is <code>None</code> (non-deterministic).</p> \u200b\u5fc5\u9700\u200b <code>kwargs</code> <code>dict</code> <p>Additional keyword arguments forwarded to <code>func</code>. For factor-based statistics this often includes <code>factor_returns</code>.</p> <code>{}</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Bootstrapped sampling distribution of passed in func.</p>"},{"location":"api/metrics/#fincore.metrics.perf_stats.calc_distribution_stats","title":"<code>calc_distribution_stats(x)</code>","text":"<p>Calculate various summary statistics of data.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>x</code> <code>ndarray or Series</code> <p>Array to compute summary statistics for.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Series containing mean, median, std, as well as 5, 25, 75 and 95 percentiles of passed in values.</p>"},{"location":"api/metrics/#yearly","title":"Yearly","text":""},{"location":"api/metrics/#fincore.metrics.yearly","title":"<code>fincore.metrics.yearly</code>","text":"<p>Yearly aggregation metrics.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.annual_return","title":"<code>annual_return(returns, period=DAILY, annualization=None)</code>","text":"<p>Determine the mean annual growth rate of returns (CAGR).</p> <p>This is effectively the compound annual growth rate assuming reinvestment of returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series or DataFrame</code> <p>Non-cumulative simple returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the input data (for example <code>DAILY</code>). Used to infer the annualization factor when <code>annualization</code> is <code>None</code>.</p> <code>DAILY</code> <code>annualization</code> <code>float</code> <p>Custom annualization factor. If provided, this value is used directly instead of inferring it from <code>period</code>.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float or ndarray or Series</code> <p>Annualized return. For 1D input a scalar is returned; for 2D input one value is returned per column.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.annual_return_by_year","title":"<code>annual_return_by_year(returns, period=DAILY, annualization=None)</code>","text":"<p>Determine the annual return for each calendar year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Annual return for each calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.sharpe_ratio_by_year","title":"<code>sharpe_ratio_by_year(returns, risk_free=0, period=DAILY, annualization=None)</code>","text":"<p>Determine the Sharpe ratio for each calendar year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate (default 0).</p> <code>0</code> <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Sharpe ratio for each calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.max_drawdown_by_year","title":"<code>max_drawdown_by_year(returns)</code>","text":"<p>Determine the maximum drawdown for each calendar year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Maximum drawdown for each calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.annual_volatility_by_year","title":"<code>annual_volatility_by_year(returns, period=DAILY, annualization=None)</code>","text":"<p>Determine the annual volatility for each calendar year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Annualized volatility for each calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.annual_active_return","title":"<code>annual_active_return(returns, factor_returns, period=DAILY, annualization=None)</code>","text":"<p>Calculate annual active return (strategy minus benchmark).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Annual active return, or <code>NaN</code> if insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.annual_active_return_by_year","title":"<code>annual_active_return_by_year(returns, factor_returns, period=DAILY, annualization=None)</code>","text":"<p>Determine the annual active return for each calendar year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative strategy returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Non-cumulative benchmark returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series</code> <p>Annual active return for each calendar year.</p>"},{"location":"api/metrics/#fincore.metrics.yearly.information_ratio_by_year","title":"<code>information_ratio_by_year(returns, factor_returns, period=DAILY, annualization=None)</code>","text":"<p>Determine the information ratio for each calendar year.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Non-cumulative strategy returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series or ndarray</code> <p>Non-cumulative benchmark returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <code>period</code> <code>str</code> <p>Frequency of the returns (default 'daily').</p> <code>DAILY</code> <code>annualization</code> <code>int</code> <p>Factor to convert period returns to yearly returns.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Series or ndarray</code> <p>Information ratio for each calendar year.</p>"},{"location":"api/metrics/#timing","title":"Timing","text":""},{"location":"api/metrics/#fincore.metrics.timing","title":"<code>fincore.metrics.timing</code>","text":"<p>Market timing metrics.</p>"},{"location":"api/metrics/#fincore.metrics.timing.treynor_mazuy_timing","title":"<code>treynor_mazuy_timing(returns, factor_returns, risk_free=0.0)</code>","text":"<p>Calculate the Treynor\u2013Mazuy market timing coefficient (gamma).</p> <p>This fits a quadratic regression of excess strategy returns on excess factor returns and uses the coefficient on the squared factor term as a measure of market timing ability.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or market returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Treynor\u2013Mazuy timing coefficient (gamma), or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.timing.henriksson_merton_timing","title":"<code>henriksson_merton_timing(returns, factor_returns, risk_free=0.0)</code>","text":"<p>Calculate the Henriksson\u2013Merton market timing coefficient.</p> <p>This fits a regression of excess strategy returns on excess factor returns and a down-market dummy, using the coefficient on the dummy as a measure of market timing.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or market returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Henriksson\u2013Merton timing coefficient, or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.timing.market_timing_return","title":"<code>market_timing_return(returns, factor_returns, risk_free=0.0)</code>","text":"<p>Calculate the market timing return component.</p> <p>Given the Treynor\u2013Mazuy timing coefficient, this computes the portion of returns attributable to market timing as <code>gamma * E[(R_m - R_f)^2]</code>.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or market returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Estimated contribution of market timing to returns, or <code>NaN</code> if the timing coefficient cannot be estimated.</p>"},{"location":"api/metrics/#fincore.metrics.timing.cornell_timing","title":"<code>cornell_timing(returns, factor_returns, risk_free=0.0)</code>","text":"<p>Calculate the Cornell timing model coefficient.</p> <p>The Cornell timing model decomposes market returns into positive and negative components and estimates different betas in up and down markets. The timing coefficient is the difference between these two betas.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>array - like or Series</code> <p>Non-cumulative strategy returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>array - like or Series</code> <p>Non-cumulative benchmark or market returns.</p> \u200b\u5fc5\u9700\u200b <code>risk_free</code> <code>float</code> <p>Risk-free rate used when computing excess returns. Default is 0.0.</p> <code>0.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Cornell timing coefficient (beta_up - beta_down), or <code>NaN</code> if there is insufficient data.</p>"},{"location":"api/metrics/#fincore.metrics.timing.extract_interesting_date_ranges","title":"<code>extract_interesting_date_ranges(returns)</code>","text":"<p>Extract returns based on interesting events.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily returns of the strategy, noncumulative.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ranges</code> <code>OrderedDict</code> <p>Date ranges, with returns, of all valid events.</p>"},{"location":"api/metrics/#consecutive","title":"Consecutive","text":""},{"location":"api/metrics/#fincore.metrics.consecutive","title":"<code>fincore.metrics.consecutive</code>","text":"<p>Consecutive up/down metrics.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.consecutive_stats","title":"<code>consecutive_stats(returns)</code>","text":"<p>Compute all consecutive up/down metrics in one pass.</p> <p>This avoids redundant resample operations when computing multiple consecutive indicators for the same return series.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative daily returns.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Dictionary with keys for all consecutive metrics.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_up_days","title":"<code>max_consecutive_up_days(returns)</code>","text":"<p>Determine the maximum number of consecutive days with positive returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative daily returns with a pandas index.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Length (in days) of the longest run of strictly positive daily returns, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_down_days","title":"<code>max_consecutive_down_days(returns)</code>","text":"<p>Determine the maximum number of consecutive days with negative returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative daily returns with a pandas index.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Length (in days) of the longest run of strictly negative daily returns, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_gain","title":"<code>max_consecutive_gain(returns)</code>","text":"<p>Determine the maximum cumulative gain over consecutive positive days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative daily returns with a pandas index.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Maximum sum of returns over any contiguous block of strictly positive-return days, or <code>NaN</code> if there are no positive days.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_loss","title":"<code>max_consecutive_loss(returns)</code>","text":"<p>Determine the maximum cumulative loss over consecutive negative days.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative daily returns with a pandas index.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Minimum (most negative) sum of returns over any contiguous block of strictly negative-return days, or <code>NaN</code> if there are no negative days.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_up_weeks","title":"<code>max_consecutive_up_weeks(returns)</code>","text":"<p>Determine the maximum number of consecutive weeks with positive returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Length (in weeks) of the longest run of strictly positive weekly returns, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_down_weeks","title":"<code>max_consecutive_down_weeks(returns)</code>","text":"<p>Determine the maximum number of consecutive weeks with negative returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Length (in weeks) of the longest run of strictly negative weekly returns, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_up_months","title":"<code>max_consecutive_up_months(returns)</code>","text":"<p>Determine the maximum number of consecutive months with positive returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Length (in months) of the longest run of strictly positive monthly returns, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_down_months","title":"<code>max_consecutive_down_months(returns)</code>","text":"<p>Determine the maximum number of consecutive months with negative returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>int or float</code> <p>Length (in months) of the longest run of strictly negative monthly returns, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_single_day_gain","title":"<code>max_single_day_gain(returns)</code>","text":"<p>Determine the maximum single-day gain.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Maximum single-day return, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_single_day_loss","title":"<code>max_single_day_loss(returns)</code>","text":"<p>Determine the maximum single-day loss.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>Minimum (most negative) single-day return, or <code>NaN</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_single_day_gain_date","title":"<code>max_single_day_gain_date(returns)</code>","text":"<p>Determine the date of the maximum single-day gain.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Timestamp or None</code> <p>Date of the maximum single-day gain, or <code>None</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_single_day_loss_date","title":"<code>max_single_day_loss_date(returns)</code>","text":"<p>Determine the date of the maximum single-day loss.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Timestamp or None</code> <p>Date of the maximum single-day loss, or <code>None</code> if the input is empty.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_up_start_date","title":"<code>max_consecutive_up_start_date(returns)</code>","text":"<p>Determine the start date of the longest consecutive up period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Timestamp or None</code> <p>Start date of the longest run of strictly positive returns, or <code>None</code> if there are no positive returns.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_up_end_date","title":"<code>max_consecutive_up_end_date(returns)</code>","text":"<p>Determine the end date of the longest consecutive up period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Timestamp or None</code> <p>End date of the longest run of strictly positive returns, or <code>None</code> if there are no positive returns.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_down_start_date","title":"<code>max_consecutive_down_start_date(returns)</code>","text":"<p>Determine the start date of the longest consecutive down period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Timestamp or None</code> <p>Start date of the longest run of strictly negative returns, or <code>None</code> if there are no negative returns.</p>"},{"location":"api/metrics/#fincore.metrics.consecutive.max_consecutive_down_end_date","title":"<code>max_consecutive_down_end_date(returns)</code>","text":"<p>Determine the end date of the longest consecutive down period.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative returns indexed by date.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Timestamp or None</code> <p>End date of the longest run of strictly negative returns, or <code>None</code> if there are no negative returns.</p>"},{"location":"api/optimization/","title":"fincore.optimization","text":""},{"location":"api/optimization/#efficient-frontier","title":"Efficient Frontier","text":""},{"location":"api/optimization/#fincore.optimization.frontier.efficient_frontier","title":"<code>fincore.optimization.frontier.efficient_frontier(returns, n_points=50, risk_free_rate=0.0, short_allowed=False, max_weight=1.0)</code>","text":"<p>Compute the mean-variance efficient frontier.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N). Columns = asset names.</p> \u200b\u5fc5\u9700\u200b <code>n_points</code> <code>int</code> <p>Number of points on the frontier.</p> <code>50</code> <code>risk_free_rate</code> <code>float</code> <p>Annual risk-free rate (used for Sharpe calculation).</p> <code>0.0</code> <code>short_allowed</code> <code>bool</code> <p>Whether short selling is allowed.</p> <code>False</code> <code>max_weight</code> <code>float</code> <p>Maximum weight per asset.</p> <code>1.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <ul> <li>'frontier_returns': array of annualised portfolio returns</li> <li>'frontier_volatilities': array of annualised portfolio volatilities</li> <li>'frontier_sharpe': array of Sharpe ratios</li> <li>'frontier_weights': (n_points x N) weight matrix</li> <li>'min_variance': dict with keys 'weights', 'return', 'volatility'</li> <li>'max_sharpe': dict with keys 'weights', 'return', 'volatility', 'sharpe'</li> <li>'asset_names': list of asset names</li> </ul>"},{"location":"api/optimization/#risk-parity","title":"Risk Parity","text":""},{"location":"api/optimization/#fincore.optimization.risk_parity.risk_parity","title":"<code>fincore.optimization.risk_parity.risk_parity(returns, risk_budget=None, max_iter=1000)</code>","text":"<p>Compute risk-parity portfolio weights.</p> <p>Each asset's marginal risk contribution is equalised (or matched to a user-supplied risk budget).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>risk_budget</code> <code>ndarray</code> <p>Target risk budget per asset (sums to 1). Defaults to equal budget <code>1/N</code> for each asset.</p> <code>None</code> <code>max_iter</code> <code>int</code> <p>Maximum solver iterations.</p> <code>1000</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <ul> <li>'weights': optimal weight array (N,)</li> <li>'risk_contributions': risk contribution per asset (N,)</li> <li>'volatility': portfolio annualised volatility</li> <li>'asset_names': list of asset names</li> </ul>"},{"location":"api/optimization/#optimize","title":"Optimize","text":""},{"location":"api/optimization/#fincore.optimization.objectives.optimize","title":"<code>fincore.optimization.objectives.optimize(returns, objective='max_sharpe', risk_free_rate=0.0, target_return=None, target_volatility=None, short_allowed=False, max_weight=1.0, min_weight=None, sector_constraints=None, sector_map=None)</code>","text":"<p>Solve a constrained portfolio optimisation problem.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>objective</code> <code>str</code> <p>One of 'max_sharpe', 'min_variance', 'target_return', 'target_risk'.</p> <code>'max_sharpe'</code> <code>risk_free_rate</code> <code>float</code> <p>Annual risk-free rate.</p> <code>0.0</code> <code>target_return</code> <code>float</code> <p>Required for <code>objective='target_return'</code>. Annualised target.</p> <code>None</code> <code>target_volatility</code> <code>float</code> <p>Required for <code>objective='target_risk'</code>. Annualised target.</p> <code>None</code> <code>short_allowed</code> <code>bool</code> <p>Allow negative weights.</p> <code>False</code> <code>max_weight</code> <code>float</code> <p>Upper bound per asset.</p> <code>1.0</code> <code>min_weight</code> <code>float</code> <p>Lower bound per asset. Defaults to 0 (or <code>-max_weight</code> if shorts allowed).</p> <code>None</code> <code>sector_constraints</code> <code>dict</code> <p><code>{sector_name: (min_alloc, max_alloc)}</code> pairs.</p> <code>None</code> <code>sector_map</code> <code>dict</code> <p><code>{asset_name: sector_name}</code> mapping (needed with <code>sector_constraints</code>).</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <ul> <li>'weights': optimal weight array</li> <li>'return': annualised expected return</li> <li>'volatility': annualised volatility</li> <li>'sharpe': Sharpe ratio</li> <li>'asset_names': list</li> <li>'objective': objective used</li> </ul>"},{"location":"api/report/","title":"fincore.report","text":""},{"location":"api/report/#create-strategy-report","title":"Create Strategy Report","text":""},{"location":"api/report/#fincore.report.create_strategy_report","title":"<code>fincore.report.create_strategy_report(returns, *, benchmark_rets=None, positions=None, transactions=None, trades=None, title='Strategy Report', output='report.html', rolling_window=63)</code>","text":"<p>Generate a strategy report (HTML or PDF) based on the inputs you provide.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Daily return series (required). Must be indexed by a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>benchmark_rets</code> <code>Series</code> <p>Benchmark return series. Enables alpha/beta, tracking error, rolling beta, etc.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Daily positions DataFrame (columns = asset symbols plus a <code>cash</code> column). Enables positions analysis.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Transactions DataFrame (must include <code>amount</code>, <code>price</code>, <code>symbol</code>). Enables transaction analysis.</p> <code>None</code> <code>trades</code> <code>DataFrame</code> <p>Closed trades DataFrame (must include <code>pnlcomm</code>; optional <code>long</code>, <code>barlen</code>, <code>commission</code>). Enables trade statistics (win rate, payoff ratio, etc.).</p> <code>None</code> <code>title</code> <code>str</code> <p>Report title.</p> <code>'Strategy Report'</code> <code>output</code> <code>str</code> <p>Output path. Use <code>.html</code> for HTML and <code>.pdf</code> for PDF.</p> <code>'report.html'</code> <code>rolling_window</code> <code>int</code> <p>Rolling window size (trading days). Default is 63 (about 3 months).</p> <code>63</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>str</code> <p>The path to the generated report.</p>"},{"location":"api/report/#html-rendering","title":"HTML Rendering","text":""},{"location":"api/report/#fincore.report.render_html.generate_html","title":"<code>fincore.report.render_html.generate_html(returns, benchmark_rets, positions, transactions, trades, title, output, rolling_window)</code>","text":"<p>Generate an interactive HTML report (ECharts + sidebar navigation).</p>"},{"location":"api/report/#pdf-rendering","title":"PDF Rendering","text":""},{"location":"api/report/#fincore.report.render_pdf.generate_pdf","title":"<code>fincore.report.render_pdf.generate_pdf(returns, benchmark_rets, positions, transactions, trades, title, output, rolling_window)</code>","text":"<p>Generate a PDF report by rendering the HTML report via Playwright.</p>"},{"location":"api/risk/","title":"fincore.risk","text":""},{"location":"api/risk/#evt-extreme-value-theory","title":"EVT (Extreme Value Theory)","text":""},{"location":"api/risk/#fincore.risk.evt","title":"<code>fincore.risk.evt</code>","text":"<p>Extreme Value Theory (EVT) models for tail risk estimation.</p> <p>EVT provides better estimates of extreme losses than normal distribution assumptions, particularly for:</p> <ul> <li>Tail index estimation (Hill estimator)</li> <li>Peaks-over-threshold (POT) with Generalized Pareto Distribution (GPD)</li> <li>Block maxima with Generalized Extreme Value (GEV) distribution</li> </ul> References <p>Embrechts, P., Kl\u00fcppelberg, C., &amp; Mikosch, T. (1997). Modelling Extremal Events for Insurance and Finance. McNeil, A. J., Frey, R., &amp; Embrechts, P. (2015). Quantitative Risk Management.</p>"},{"location":"api/risk/#fincore.risk.evt.hill_estimator","title":"<code>hill_estimator(data, threshold=None, tail='upper')</code>","text":"<p>Estimate tail index using Hill estimator.</p> <p>The Hill estimator is a popular method for estimating the tail index (extreme value index) of heavy-tailed distributions.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>data</code> <code>array - like</code> <p>Input data (returns or losses).</p> \u200b\u5fc5\u9700\u200b <code>threshold</code> <code>float</code> <p>Threshold for selecting tail data. If None, uses 90th percentile for upper tail.</p> <code>None</code> <code>tail</code> <code>str</code> <p>Which tail to estimate: 'upper' (right/gains) or 'lower' (left/losses).</p> <code>'upper'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>xi</code> <code>float</code> <p>Estimated tail index (shape parameter). xi &gt; 0: Heavy-tailed (Pareto, Student-t) xi = 0: Exponential tail xi &lt; 0: Bounded tail (Beta, Uniform)</p> <code>excesses</code> <code>ndarray</code> <p>Data above threshold.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = np.random.standard_t(3, 10000)\n&gt;&gt;&gt; xi, excesses = hill_estimator(returns, tail=\"lower\")\n&gt;&gt;&gt; print(f\"Tail index: {xi:.3f}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.evt.gpd_fit","title":"<code>gpd_fit(data, threshold=None, method='mle')</code>","text":"<p>Fit Generalized Pareto Distribution (GPD) to exceedances.</p> <p>GPD is used in Peaks-Over-Threshold (POT) method for modeling tail exceedances above a threshold.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>data</code> <code>array - like</code> <p>Input data (returns or losses).</p> \u200b\u5fc5\u9700\u200b <code>threshold</code> <code>float</code> <p>Threshold for POT. If None, uses 90th percentile.</p> <code>None</code> <code>method</code> <code>str</code> <p>Estimation method: 'mle' (maximum likelihood) or 'pwm' (probability weighted moments).</p> <code>'mle'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Fitted parameters: - 'xi' (shape): Tail index - 'beta' (scale): Scale parameter - 'threshold': Fitted threshold - 'n_exceed': Number of exceedances</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = np.random.standard_t(4, 10000)\n&gt;&gt;&gt; params = gpd_fit(returns, tail=\"lower\")\n&gt;&gt;&gt; print(f\"xi={params['xi']:.3f}, beta={params['beta']:.3f}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.evt.gev_fit","title":"<code>gev_fit(data, block_size=None)</code>","text":"<p>Fit Generalized Extreme Value (GEV) distribution to block maxima.</p> <p>GEV is used for modeling maximum values over fixed time blocks (e.g., monthly maximum losses).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>data</code> <code>array - like</code> <p>Input data (returns or losses).</p> \u200b\u5fc5\u9700\u200b <code>block_size</code> <code>int</code> <p>Size of each block for extracting maxima. If None, uses sqrt(n) blocks.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Fitted parameters: - 'xi' (shape): Tail index - 'mu' (location): Location parameter - 'sigma' (scale): Scale parameter</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = np.random.standard_t(4, 10000)\n&gt;&gt;&gt; params = gev_fit(returns, block_size=252)  # Annual maxima\n&gt;&gt;&gt; print(f\"xi={params['xi']:.3f}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.evt.evt_var","title":"<code>evt_var(data, alpha=0.05, model='gpd', tail='lower', threshold=None, block_size=None)</code>","text":"<p>Calculate VaR using Extreme Value Theory.</p> <p>EVT-based VaR provides better tail risk estimates than normal distribution assumptions.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>data</code> <code>array - like</code> <p>Input return data.</p> \u200b\u5fc5\u9700\u200b <code>alpha</code> <code>float</code> <p>Significance level (e.g., 0.05 for 95% VaR).</p> <code>0.05</code> <code>model</code> <code>str</code> <p>EVT model: 'gpd' (POT) or 'gev' (block maxima).</p> <code>'gpd'</code> <code>tail</code> <code>str</code> <p>Tail to estimate: 'lower' for losses, 'upper' for gains.</p> <code>'lower'</code> <code>threshold</code> <code>float</code> <p>Threshold for GPD fitting.</p> <code>None</code> <code>block_size</code> <code>int</code> <p>Block size for GEV fitting.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>EVT-based VaR estimate (negative value for losses).</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = np.random.standard_t(4, 1000)\n&gt;&gt;&gt; var_95 = evt_var(returns, alpha=0.05, model=\"gpd\")\n&gt;&gt;&gt; print(f\"95% EVT-VaR: {var_95:.2%}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.evt.evt_cvar","title":"<code>evt_cvar(data, alpha=0.05, model='gpd', tail='lower', threshold=None, block_size=None)</code>","text":"<p>Calculate CVaR (Expected Shortfall) using EVT.</p> <p>EVT-based CVaR provides better average tail loss estimates.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>data</code> <code>array - like</code> <p>Input return data.</p> \u200b\u5fc5\u9700\u200b <code>alpha</code> <code>float</code> <p>Significance level.</p> <code>0.05</code> <code>model</code> <code>str</code> <p>EVT model: 'gpd' or 'gev'.</p> <code>'gpd'</code> <code>tail</code> <code>str</code> <p>Tail to estimate.</p> <code>'lower'</code> <code>threshold</code> <code>float</code> <p>Threshold for GPD fitting.</p> <code>None</code> <code>block_size</code> <code>int</code> <p>Block size for GEV fitting.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>EVT-based CVaR estimate (negative value for losses).</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = np.random.standard_t(4, 1000)\n&gt;&gt;&gt; cvar_95 = evt_cvar(returns, alpha=0.05, model=\"gpd\")\n&gt;&gt;&gt; print(f\"95% EVT-CVaR: {cvar_95:.2%}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.evt.extreme_risk","title":"<code>extreme_risk(returns, alpha=0.05, tail='lower', model='gpd', threshold=None, block_size=None)</code>","text":"<p>Calculate comprehensive EVT-based risk measures.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Return series.</p> \u200b\u5fc5\u9700\u200b <code>alpha</code> <code>float</code> <p>Significance level.</p> <code>0.05</code> <code>tail</code> <code>str</code> <p>Tail to estimate.</p> <code>'lower'</code> <code>model</code> <code>str</code> <p>EVT model.</p> <code>'gpd'</code> <code>threshold</code> <code>float</code> <p>Threshold for GPD fitting.</p> <code>None</code> <code>block_size</code> <code>int</code> <p>Block size for GEV fitting.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Risk measures including VaR, CVaR, tail index, and threshold.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = pd.Series(np.random.standard_t(4, 1000))\n&gt;&gt;&gt; risk = extreme_risk(returns, alpha=0.05)\n&gt;&gt;&gt; print(risk)\n</code></pre>"},{"location":"api/risk/#garch","title":"GARCH","text":""},{"location":"api/risk/#fincore.risk.garch","title":"<code>fincore.risk.garch</code>","text":"<p>GARCH models for conditional volatility estimation.</p> <p>Provides GARCH family models for time-varying volatility estimation: - GARCH(p, q): Generalized Autoregressive Conditional Heteroskedasticity - EGARCH: Exponential GARCH (asymmetric effects) - GJR-GARCH: Glosten-Jagannathan-Runkle GARCH (leverage effect)</p> References <p>Engle, R. F. (1982). Autoregressive Conditional Heteroscedasticity. Bollerslev, T. (1986). Generalized Autoregressive Conditional Heteroscedasticity. Nelson, D. B. (1991). Conditional Heteroskedasticity in Asset Returns. Glosten, L. R., Jagannathan, R., &amp; Runkle, D. E. (1993). On the Relation Between the Expected Value and the Volatility of the Nominal Excess Return on Stocks.</p>"},{"location":"api/risk/#fincore.risk.garch.GARCHResult","title":"<code>GARCHResult(params, conditional_var, residuals, log_likelihood)</code>  <code>dataclass</code>","text":"<p>Result of GARCH model fitting.</p> <p>\u200b\u5c5e\u6027\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>params</code> <code>dict</code> <p>Fitted parameters (omega, alpha, beta, etc.).</p> <code>conditional_var</code> <code>ndarray</code> <p>Fitted conditional variances.</p> <code>residuals</code> <code>ndarray</code> <p>Standardized residuals.</p> <code>log_likelihood</code> <code>float</code> <p>Maximized log-likelihood value.</p>"},{"location":"api/risk/#fincore.risk.garch.GARCHResult.forecast","title":"<code>forecast(horizon=1)</code>","text":"<p>Forecast future conditional variances.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>horizon</code> <code>int</code> <p>Number of steps ahead to forecast.</p> <code>1</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Forecasted variances.</p>"},{"location":"api/risk/#fincore.risk.garch.GARCH","title":"<code>GARCH(p=1, q=1, mean_model='zero')</code>","text":"<p>GARCH(p, q) model for conditional volatility.</p> <p>The standard GARCH(p, q) model: sigma_t^2 = omega + sum(alpha_i * epsilon_{t-i}^2) + sum(beta_j * sigma_{t-j}^2)</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>p</code> <code>int</code> <p>Order of ARCH terms (past squared shocks).</p> <code>1</code> <code>q</code> <code>int</code> <p>Order of GARCH terms (past conditional variances).</p> <code>1</code> <code>mean_model</code> <code>str</code> <p>Mean model: 'zero' (zero mean), 'constant' (constant mean).</p> <code>'zero'</code> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = pd.Series(np.random.randn(1000) * 0.02)\n&gt;&gt;&gt; model = GARCH(p=1, q=1)\n&gt;&gt;&gt; result = model.fit(returns)\n&gt;&gt;&gt; forecasts = result.forecast(horizon=10)\n</code></pre>"},{"location":"api/risk/#fincore.risk.garch.GARCH.fit","title":"<code>fit(returns, method='MLE')</code>","text":"<p>Fit GARCH model to returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Return series (not prices!).</p> \u200b\u5fc5\u9700\u200b <code>method</code> <code>str</code> <p>Estimation method: 'MLE' (max likelihood) or 'OLS'.</p> <code>'MLE'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>GARCHResult</code> <p>Fitted model result.</p>"},{"location":"api/risk/#fincore.risk.garch.EGARCH","title":"<code>EGARCH(p=1, q=1)</code>","text":"<p>Exponential GARCH model for asymmetric volatility.</p> <p>EGARCH models the log of variance, allowing for: - Leverage effects (negative shocks have different impact) - Guaranteed positive variance</p> <p>The EGARCH(1,1) model: log(sigma_t^2) = omega + alpha * |z_{t-1}| + gamma * z_{t-1} + beta * log(sigma_{t-1}^2)</p> <p>where z_t = epsilon_t / sigma_t are standardized shocks.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>p</code> <code>int</code> <p>Order of asymmetric terms.</p> <code>1</code> <code>q</code> <code>int</code> <p>Order of GARCH terms.</p> <code>1</code> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = pd.Series(np.random.randn(1000) * 0.02)\n&gt;&gt;&gt; model = EGARCH()\n&gt;&gt;&gt; result = model.fit(returns)\n&gt;&gt;&gt; forecasts = result.forecast(horizon=10)\n</code></pre>"},{"location":"api/risk/#fincore.risk.garch.EGARCH.fit","title":"<code>fit(returns)</code>","text":"<p>Fit EGARCH model to returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Return series.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>GARCHResult</code> <p>Fitted model result.</p>"},{"location":"api/risk/#fincore.risk.garch.GJRGARCH","title":"<code>GJRGARCH(p=1, q=1)</code>","text":"<p>GJR-GARCH model with leverage effect.</p> <p>GJR-GARCH adds a term to capture asymmetric response to shocks: - Negative shocks (bad news) increase volatility more than positive shocks</p> <p>The GJR-GARCH(1,1) model: sigma_t^2 = omega + alpha * epsilon_{t-1}^2 + gamma * I_{t-1} * epsilon_{t-1}^2 + beta * sigma_{t-1}^2</p> <p>where I_t = 1 if epsilon_t &lt; 0 else 0.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>p</code> <code>int</code> <p>Order of ARCH terms.</p> <code>1</code> <code>q</code> <code>int</code> <p>Order of GARCH terms.</p> <code>1</code> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = pd.Series(np.random.randn(1000) * 0.02)\n&gt;&gt;&gt; model = GJRGARCH()\n&gt;&gt;&gt; result = model.fit(returns)\n&gt;&gt;&gt; print(f\"Leverage gamma: {result.params['gamma']:.3f}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.garch.GJRGARCH.fit","title":"<code>fit(returns)</code>","text":"<p>Fit GJR-GARCH model to returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Return series.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>GARCHResult</code> <p>Fitted model result including leverage parameter gamma.</p>"},{"location":"api/risk/#fincore.risk.garch.forecast_volatility","title":"<code>forecast_volatility(returns, model='GARCH', horizon=1, **kwargs)</code>","text":"<p>Forecast future volatility using GARCH models.</p> <p>Convenience function for volatility forecasting.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Historical returns.</p> \u200b\u5fc5\u9700\u200b <code>model</code> <code>str</code> <p>Model type: 'GARCH', 'EGARCH', 'GJRGARCH'.</p> <code>'GARCH'</code> <code>horizon</code> <code>int</code> <p>Forecast horizon.</p> <code>1</code> <code>**kwargs</code> <p>Additional model parameters (p, q, etc.).</p> <code>{}</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>forecasts</code> <code>ndarray</code> <p>Forecasted conditional variances.</p> <code>result</code> <code>GARCHResult</code> <p>Fitted model result.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = pd.Series(np.random.randn(1000) * 0.02)\n&gt;&gt;&gt; forecasts, result = forecast_volatility(returns, model=\"EGARCH\", horizon=5)\n&gt;&gt;&gt; print(f\"5-day volatility forecast: {np.sqrt(forecasts)}\")\n</code></pre>"},{"location":"api/risk/#fincore.risk.garch.conditional_var","title":"<code>conditional_var(returns, model='GARCH', alpha=0.05, **kwargs)</code>","text":"<p>Calculate conditional VaR using GARCH models.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Historical returns.</p> \u200b\u5fc5\u9700\u200b <code>model</code> <code>str</code> <p>Model type.</p> <code>'GARCH'</code> <code>alpha</code> <code>float</code> <p>Significance level.</p> <code>0.05</code> <code>**kwargs</code> <p>Additional model parameters.</p> <code>{}</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Contains 'var' (VaR estimate), 'cond_var' (conditional variances), and 'result' (full model fit).</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; returns = pd.Series(np.random.randn(1000) * 0.02)\n&gt;&gt;&gt; risk = conditional_var(returns, model=\"GJRGARCH\", alpha=0.01)\n&gt;&gt;&gt; print(f\"Conditional VaR (99%): {risk['var']:.2%}\")\n</code></pre>"},{"location":"api/simulation/","title":"fincore.simulation","text":""},{"location":"api/simulation/#montecarlo","title":"MonteCarlo","text":""},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo","title":"<code>fincore.simulation.monte_carlo.MonteCarlo(returns)</code>","text":"<p>Monte Carlo simulation engine for financial risk analysis.</p> <p>Provides methods for: - Path simulation using Geometric Brownian Motion - Risk metric calculation (VaR, CVaR) - Stress testing scenarios</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Historical returns for parameter estimation.</p> \u200b\u5fc5\u9700"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.simulate","title":"<code>simulate(n_paths=1000, horizon=252, *, drift=None, volatility=None, antithetic=False, seed=None)</code>","text":"<p>Simulate future return paths using Geometric Brownian Motion.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>n_paths</code> <code>int</code> <p>Number of paths to simulate.</p> <code>1000</code> <code>horizon</code> <code>int</code> <p>Number of time steps to simulate.</p> <code>252</code> <code>drift</code> <code>float</code> <p>Annualized drift rate. If None, estimated from returns.</p> <code>None</code> <code>volatility</code> <code>float</code> <p>Annualized volatility. If None, estimated from returns.</p> <code>None</code> <code>antithetic</code> <code>bool</code> <p>Use antithetic variates for variance reduction.</p> <code>False</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>SimResult</code> <p>Object containing simulated paths and statistics.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; from fincore.simulation import MonteCarlo\n&gt;&gt;&gt; returns = np.random.normal(0.001, 0.02, 252)\n&gt;&gt;&gt; mc = MonteCarlo(returns)\n&gt;&gt;&gt; result = mc.simulate(n_paths=10000, horizon=252)\n&gt;&gt;&gt; print(f\"95% VaR: {result.var(0.05):.2%}\")\n</code></pre>"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.var","title":"<code>var(alpha=0.05, n_paths=10000, horizon=252, seed=None)</code>","text":"<p>Calculate Value at Risk using Monte Carlo simulation.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>alpha</code> <code>float</code> <p>Significance level (0.05 = 95% VaR).</p> <code>0.05</code> <code>n_paths</code> <code>int</code> <p>Number of simulation paths.</p> <code>10000</code> <code>horizon</code> <code>int</code> <p>Simulation horizon.</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>VaR at the specified significance level.</p>"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.cvar","title":"<code>cvar(alpha=0.05, n_paths=10000, horizon=252, seed=None)</code>","text":"<p>Calculate Conditional Value at Risk (Expected Shortfall).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>alpha</code> <code>float</code> <p>Significance level (0.05 = 95% CVaR).</p> <code>0.05</code> <code>n_paths</code> <code>int</code> <p>Number of simulation paths.</p> <code>10000</code> <code>horizon</code> <code>int</code> <p>Simulation horizon.</p> <code>252</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>float</code> <p>CVaR at the specified significance level.</p>"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.price_paths","title":"<code>price_paths(S0, n_paths=1000, horizon=252, mu=None, sigma=None, seed=None)</code>","text":"<p>Simulate price paths starting from given initial price.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>S0</code> <code>float</code> <p>Initial asset price.</p> \u200b\u5fc5\u9700\u200b <code>n_paths</code> <code>int</code> <p>Number of paths to simulate.</p> <code>1000</code> <code>horizon</code> <code>int</code> <p>Number of trading days to simulate.</p> <code>252</code> <code>mu</code> <code>float</code> <p>Annual drift. Estimated from returns if None.</p> <code>None</code> <code>sigma</code> <code>float</code> <p>Annual volatility. Estimated from returns if None.</p> <code>None</code> <code>seed</code> <code>int</code> <p>Random seed.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>SimResult</code> <p>Simulated price paths.</p>"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.stress","title":"<code>stress(scenarios=None)</code>","text":"<p>Perform stress testing on historical returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>scenarios</code> <code>list of str</code> <p>Scenarios to apply. Options: 'crash', 'spike', 'vol_crush', 'vol_spike'. If None, applies all.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Stress test results for each scenario.</p>"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.stress_table","title":"<code>stress_table()</code>","text":"<p>Generate a summary table of stress test results.</p> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Formatted stress test results.</p>"},{"location":"api/simulation/#fincore.simulation.monte_carlo.MonteCarlo.from_parameters","title":"<code>from_parameters(mu, sigma, S0=1.0, n_paths=1000, horizon=252, seed=None)</code>  <code>staticmethod</code>","text":"<p>Create Monte Carlo simulation from known parameters.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>mu</code> <code>float</code> <p>Annual drift rate.</p> \u200b\u5fc5\u9700\u200b <code>sigma</code> <code>float</code> <p>Annual volatility.</p> \u200b\u5fc5\u9700\u200b <code>S0</code> <code>float</code> <p>Initial price/return level.</p> <code>1.0</code> <code>n_paths</code> <code>int</code> <p>Number of paths.</p> <code>1000</code> <code>horizon</code> <code>int</code> <p>Simulation horizon in days.</p> <code>252</code> <code>seed</code> <code>int</code> <p>Random seed.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>SimResult</code> <p>Simulation result.</p>"},{"location":"api/simulation/#bootstrap","title":"Bootstrap","text":""},{"location":"api/simulation/#fincore.simulation.bootstrap","title":"<code>fincore.simulation.bootstrap</code>","text":"<p>Bootstrap methods for statistical inference.</p> <p>Provides non-parametric statistical inference using resampling techniques.</p>"},{"location":"api/simulation/#fincore.simulation.bootstrap.bootstrap","title":"<code>bootstrap(returns, n_samples=10000, statistic='mean', seed=None)</code>","text":"<p>Bootstrap resampling for statistical inference.</p> <p>Resamples the returns with replacement and computes a statistic on each resample to build its distribution.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Input returns data.</p> \u200b\u5fc5\u9700\u200b <code>n_samples</code> <code>int</code> <p>Number of bootstrap resamples.</p> <code>10000</code> <code>statistic</code> <code>str or callable</code> <p>Statistic to compute. Can be: - String: 'mean', 'std', 'sharpe', 'median' - Callable: Custom function taking array and returning scalar</p> <code>\"mean\"</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>(ndarray, shape(n_samples))</code> <p>Bootstrap distribution of the statistic.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; from fincore.simulation import bootstrap\n&gt;&gt;&gt; returns = np.random.normal(0.001, 0.02, 252)\n&gt;&gt;&gt; boot_mean = bootstrap(returns, n_samples=10000, statistic=\"mean\")\n&gt;&gt;&gt; np.percentile(boot_mean, [2.5, 97.5])  # 95% CI\n</code></pre>"},{"location":"api/simulation/#fincore.simulation.bootstrap.bootstrap_ci","title":"<code>bootstrap_ci(returns, n_samples=10000, alpha=0.05, statistic='mean', method='percentile', seed=None)</code>","text":"<p>Calculate bootstrap confidence interval.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Input returns data.</p> \u200b\u5fc5\u9700\u200b <code>n_samples</code> <code>int</code> <p>Number of bootstrap resamples.</p> <code>10000</code> <code>alpha</code> <code>float</code> <p>Significance level (0.05 = 95% confidence interval).</p> <code>0.05</code> <code>statistic</code> <code>str or callable</code> <p>Statistic to compute.</p> <code>\"mean\"</code> <code>method</code> <code>str</code> <p>Method for CI calculation: - 'percentile': Simple percentile method - 'bc': Bias-corrected (not implemented) - 'bca': BCa method (not implemented)</p> <code>\"percentile\"</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>tuple(lower, upper)</code> <p>Lower and upper bounds of the confidence interval.</p> <p>\u200b\u793a\u4f8b\u200b\uff1a</p> <pre><code>&gt;&gt;&gt; from fincore.simulation import bootstrap_ci\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; returns = np.random.normal(0.001, 0.02, 252)\n&gt;&gt;&gt; ci = bootstrap_ci(returns, alpha=0.05)\n&gt;&gt;&gt; print(f\"95% CI: [{ci[0]:.4f}, {ci[1]:.4f}]\")\n</code></pre>"},{"location":"api/simulation/#fincore.simulation.bootstrap.bootstrap_summary","title":"<code>bootstrap_summary(returns, n_samples=10000, alpha=0.05, seed=None)</code>","text":"<p>Compute comprehensive bootstrap statistics summary.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Input returns data.</p> \u200b\u5fc5\u9700\u200b <code>n_samples</code> <code>int</code> <p>Number of bootstrap resamples.</p> <code>10000</code> <code>alpha</code> <code>float</code> <p>Significance level for confidence intervals.</p> <code>0.05</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Dictionary containing bootstrap statistics for multiple metrics.</p>"},{"location":"api/simulation/#paths","title":"Paths","text":""},{"location":"api/simulation/#fincore.simulation.paths","title":"<code>fincore.simulation.paths</code>","text":"<p>Path generation methods for Monte Carlo simulation.</p> <p>Implements various stochastic processes for generating price/return paths: - Geometric Brownian Motion (GBM) - Jump Diffusion - Heston Stochastic Volatility (future)</p>"},{"location":"api/simulation/#fincore.simulation.paths.geometric_brownian_motion","title":"<code>geometric_brownian_motion(S0, mu, sigma, T, dt, n_paths, rng=None, seed=None)</code>","text":"<p>Generate price paths using Geometric Brownian Motion.</p> <p>The GBM model is:     dS = mu * S * dt + sigma * S * dW</p> <p>Discrete form:     S(t+dt) = S(t) * exp((mu - 0.5sigma^2)dt + sigmasqrt(dt)Z)</p> <p>where Z ~ N(0,1).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>S0</code> <code>float</code> <p>Initial asset price.</p> \u200b\u5fc5\u9700\u200b <code>mu</code> <code>float</code> <p>Annualized drift rate.</p> \u200b\u5fc5\u9700\u200b <code>sigma</code> <code>float</code> <p>Annualized volatility.</p> \u200b\u5fc5\u9700\u200b <code>T</code> <code>float</code> <p>Total time in years.</p> \u200b\u5fc5\u9700\u200b <code>dt</code> <code>float</code> <p>Time step size in years.</p> \u200b\u5fc5\u9700\u200b <code>n_paths</code> <code>int</code> <p>Number of paths to simulate.</p> \u200b\u5fc5\u9700\u200b <code>rng</code> <code>Generator</code> <p>Random number generator.</p> <code>None</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>(ndarray, shape(n_paths, n_steps))</code> <p>Simulated price paths.</p>"},{"location":"api/simulation/#fincore.simulation.paths.gbm_from_returns","title":"<code>gbm_from_returns(returns, horizon=252, n_paths=1000, frequency=252, rng=None, seed=None)</code>","text":"<p>Generate GBM paths estimated from historical returns.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Historical returns to estimate parameters from.</p> \u200b\u5fc5\u9700\u200b <code>horizon</code> <code>int</code> <p>Number of time steps to simulate.</p> <code>252</code> <code>n_paths</code> <code>int</code> <p>Number of paths to generate.</p> <code>1000</code> <code>frequency</code> <code>int</code> <p>Number of periods per year (for parameter estimation).</p> <code>252</code> <code>rng</code> <code>Generator</code> <p>Random number generator.</p> <code>None</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>(ndarray, shape(n_paths, horizon))</code> <p>Simulated cumulative return paths.</p>"},{"location":"api/simulation/#fincore.simulation.paths.antithetic_variates","title":"<code>antithetic_variates(paths)</code>","text":"<p>Generate antithetic variates for variance reduction.</p> <p>Creates mirror paths using -Z instead of Z, which reduces Monte Carlo variance by approximately half.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>paths</code> <code>ndarray</code> <p>Original paths generated with random variates Z.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ndarray</code> <p>Original paths concatenated with antithetic paths.</p>"},{"location":"api/simulation/#fincore.simulation.paths.latin_hypercube_sampling","title":"<code>latin_hypercube_sampling(n_samples, n_dimensions, rng=None, seed=None)</code>","text":"<p>Generate Latin Hypercube samples for quasi-Monte Carlo.</p> <p>LHS provides better coverage of the sample space than pure random sampling, often reducing required samples.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>n_samples</code> <code>int</code> <p>Number of samples to generate.</p> \u200b\u5fc5\u9700\u200b <code>n_dimensions</code> <code>int</code> <p>Number of dimensions (time steps).</p> \u200b\u5fc5\u9700\u200b <code>rng</code> <code>Generator</code> <p>Random number generator.</p> <code>None</code> <code>seed</code> <code>int</code> <p>Random seed for reproducibility.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>(ndarray, shape(n_samples, n_dimensions))</code> <p>LHS samples in [0, 1].</p>"},{"location":"api/simulation/#scenarios","title":"Scenarios","text":""},{"location":"api/simulation/#fincore.simulation.scenarios","title":"<code>fincore.simulation.scenarios</code>","text":"<p>Stress testing scenarios for portfolio analysis.</p> <p>Generates extreme market scenarios for stress testing portfolios.</p>"},{"location":"api/simulation/#fincore.simulation.scenarios.stress_test","title":"<code>stress_test(returns, scenarios=None, custom_scenarios=None)</code>","text":"<p>Perform stress testing on returns under various scenarios.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or ndarray</code> <p>Historical returns to stress test.</p> \u200b\u5fc5\u9700\u200b <code>scenarios</code> <code>list of str</code> <p>Predefined scenarios to apply. Options: - 'crash': Sudden market crash (-20% or more) - 'spike': Sudden market jump (+10% or more) - 'vol_crush': Volatility crush (vol drops 50%) - 'vol_spike': Volatility spike (vol doubles) - 'correlation_breakdown': Correlation goes to 1 If None, applies all predefined scenarios.</p> <code>None</code> <code>custom_scenarios</code> <code>dict</code> <p>Custom scenarios as {name: {params}}. Each params dict can contain: - 'return_shift': Additive return adjustment - 'return_mult': Multiplicative return adjustment - 'vol_mult': Volatility multiplier</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <p>Dictionary with scenario names as keys and results as values. Each result contains: - 'stressed_returns': The stressed return series - 'cumulative': Cumulative stressed return - 'max_drawdown': Maximum drawdown under stress - 'volatility': Volatility under stress</p>"},{"location":"api/simulation/#fincore.simulation.scenarios.generate_correlation_breakdown","title":"<code>generate_correlation_breakdown(n_assets, target_correlation=1.0)</code>","text":"<p>Generate correlation matrix for correlation breakdown stress test.</p> <p>In correlation breakdown, all assets become perfectly correlated, which eliminates diversification benefits.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>n_assets</code> <code>int</code> <p>Number of assets.</p> \u200b\u5fc5\u9700\u200b <code>target_correlation</code> <code>float</code> <p>Target correlation between all assets.</p> <code>1.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>(ndarray, shape(n_assets, n_assets))</code> <p>Correlation matrix with uniform correlation.</p>"},{"location":"api/simulation/#fincore.simulation.scenarios.scenario_table","title":"<code>scenario_table(stress_results)</code>","text":"<p>Format stress test results as a table.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>stress_results</code> <code>dict</code> <p>Output from stress_test() function.</p> \u200b\u5fc5\u9700\u200b <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>DataFrame</code> <p>Summary table of stress test results.</p>"},{"location":"api/viz/","title":"fincore.viz","text":""},{"location":"api/viz/#vizbackend-protocol","title":"VizBackend Protocol","text":""},{"location":"api/viz/#fincore.viz.base.VizBackend","title":"<code>fincore.viz.base.VizBackend</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Protocol that every visualization backend must implement.</p>"},{"location":"api/viz/#fincore.viz.base.VizBackend.plot_returns","title":"<code>plot_returns(cum_returns, **kwargs)</code>","text":"<p>Plot cumulative returns.</p>"},{"location":"api/viz/#fincore.viz.base.VizBackend.plot_drawdown","title":"<code>plot_drawdown(drawdown, **kwargs)</code>","text":"<p>Plot drawdown underwater chart.</p>"},{"location":"api/viz/#fincore.viz.base.VizBackend.plot_rolling_sharpe","title":"<code>plot_rolling_sharpe(sharpe, benchmark_sharpe=None, window=252, **kwargs)</code>","text":"<p>Plot rolling Sharpe ratio.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>sharpe</code> <code>Series</code> <p>Rolling Sharpe ratio series.</p> \u200b\u5fc5\u9700\u200b <code>benchmark_sharpe</code> <code>Series</code> <p>Optional benchmark rolling Sharpe series.</p> <code>None</code> <code>window</code> <code>int</code> <p>Window size (used for title/annotation).</p> <code>252</code>"},{"location":"api/viz/#fincore.viz.base.VizBackend.plot_monthly_heatmap","title":"<code>plot_monthly_heatmap(returns, **kwargs)</code>","text":"<p>Plot monthly returns heatmap.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or DataFrame</code> <p>Either a daily returns series (will be aggregated internally) or a year x month table of monthly returns.</p> \u200b\u5fc5\u9700"},{"location":"api/viz/#get_backend","title":"get_backend","text":""},{"location":"api/viz/#fincore.viz.base.get_backend","title":"<code>fincore.viz.base.get_backend(name='matplotlib')</code>","text":"<p>Resolve a visualization backend by name.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>name</code> <code>str</code> <p>Backend identifier.  Supported backends: - <code>'matplotlib'</code>: Static Matplotlib plots (requires matplotlib) - <code>'html'</code>: Self-contained HTML reports - <code>'plotly'</code>: Interactive Plotly plots (requires plotly) - <code>'bokeh'</code>: Interactive Bokeh plots (requires bokeh)</p> <code>'matplotlib'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>VizBackend</code> <p>An instance satisfying the :class:<code>VizBackend</code> protocol.</p> <p>\u200b\u5f15\u53d1\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>ValueError</code> <p>If the requested backend is not recognized.</p> <code>ImportError</code> <p>If the backend's dependencies are not installed.</p>"},{"location":"api/viz/#htmlreportbuilder","title":"HtmlReportBuilder","text":""},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder","title":"<code>fincore.viz.html_backend.HtmlReportBuilder()</code>","text":"<p>Build a standalone HTML performance report.</p> <p>This class also satisfies the :class:<code>~fincore.viz.base.VizBackend</code> protocol (the <code>plot_*</code> methods append HTML sections and return <code>self</code> for chaining).</p> <p>Usage::</p> <pre><code>from fincore.viz.html_backend import HtmlReportBuilder\nbuilder = HtmlReportBuilder()\nbuilder.add_title(\"Performance Report\")\nbuilder.add_stats_table(perf_stats_series)\nhtml_str = builder.build()\n</code></pre>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.add_title","title":"<code>add_title(title='Performance Report')</code>","text":"<p>Append an <code>&lt;h1&gt;</code> title section to the report.</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.add_heading","title":"<code>add_heading(text, level=2)</code>","text":"<p>Append a heading (<code>&lt;h2&gt;</code> \u2026 <code>&lt;h6&gt;</code>) section to the report.</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.add_stats_table","title":"<code>add_stats_table(stats)</code>","text":"<p>Render a two-column key/value table from a pandas Series.</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.add_metric_cards","title":"<code>add_metric_cards(stats, keys=None)</code>","text":"<p>Render inline metric cards for selected keys from stats.</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.add_html","title":"<code>add_html(raw_html)</code>","text":"<p>Append raw HTML directly to the report body.</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.plot_returns","title":"<code>plot_returns(cum_returns, **kwargs)</code>","text":"<p>Append a cumulative-returns table section (VizBackend protocol).</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.plot_drawdown","title":"<code>plot_drawdown(drawdown, **kwargs)</code>","text":"<p>Append a drawdown table section (VizBackend protocol).</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.plot_rolling_sharpe","title":"<code>plot_rolling_sharpe(sharpe, benchmark_sharpe=None, window=252, **kwargs)</code>","text":"<p>Append a rolling Sharpe ratio table section (VizBackend protocol).</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.plot_monthly_heatmap","title":"<code>plot_monthly_heatmap(returns, **kwargs)</code>","text":"<p>Append a monthly-returns pivot table section (VizBackend protocol).</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.build","title":"<code>build()</code>","text":"<p>Assemble all sections into a complete HTML document string.</p>"},{"location":"api/viz/#fincore.viz.html_backend.HtmlReportBuilder.save","title":"<code>save(path)</code>","text":"<p>Write the report to a file at path.</p>"},{"location":"api/viz/#matplotlibbackend","title":"MatplotlibBackend","text":""},{"location":"api/viz/#fincore.viz.matplotlib_backend.MatplotlibBackend","title":"<code>fincore.viz.matplotlib_backend.MatplotlibBackend</code>","text":"<p>Visualization backend powered by matplotlib.</p> <p>All methods return the <code>matplotlib.axes.Axes</code> object so callers can further customise the plot.</p>"},{"location":"api/viz/#fincore.viz.matplotlib_backend.MatplotlibBackend.plot_returns","title":"<code>plot_returns(cum_returns, *, title='Cumulative Returns', ax=None, **kwargs)</code>","text":"<p>Plot cumulative returns as a line chart.</p>"},{"location":"api/viz/#fincore.viz.matplotlib_backend.MatplotlibBackend.plot_drawdown","title":"<code>plot_drawdown(drawdown, *, title='Drawdown', ax=None, **kwargs)</code>","text":"<p>Plot drawdown as a filled area chart.</p>"},{"location":"api/viz/#fincore.viz.matplotlib_backend.MatplotlibBackend.plot_rolling_sharpe","title":"<code>plot_rolling_sharpe(sharpe, benchmark_sharpe=None, window=252, *, title=None, ax=None, **kwargs)</code>","text":"<p>Plot rolling Sharpe ratio with optional benchmark overlay.</p>"},{"location":"api/viz/#fincore.viz.matplotlib_backend.MatplotlibBackend.plot_monthly_heatmap","title":"<code>plot_monthly_heatmap(returns, *, title='Monthly Returns (%)', ax=None, **kwargs)</code>","text":"<p>Plot a year \u00d7 month heatmap of returns using <code>imshow</code>.</p>"},{"location":"development/api-stability/","title":"API Stability","text":""},{"location":"development/api-stability/#stable-apis","title":"Stable APIs","text":"<ul> <li>All functions in <code>fincore.__all__</code></li> <li><code>AnalysisContext</code> and its public methods</li> <li><code>RollingEngine</code> and its <code>compute()</code> method</li> <li><code>Empyrical</code> class methods</li> <li><code>Pyfolio</code> class methods</li> </ul>"},{"location":"development/api-stability/#internal-apis","title":"Internal APIs","text":"<p>Modules prefixed with <code>_</code> (e.g., <code>fincore._registry</code>) are internal and may change without notice.</p>"},{"location":"development/api-stability/#versioning","title":"Versioning","text":"<ul> <li>Major (X.0.0): Breaking changes to stable APIs</li> <li>Minor (0.X.0): New features, backward compatible</li> <li>Patch (0.0.X): Bug fixes, backward compatible</li> </ul>"},{"location":"development/api-stability/#deprecation-process","title":"Deprecation Process","text":"<ol> <li>Mark as deprecated in docs + add warning</li> <li>Keep functional for at least one minor version</li> <li>Remove in next major version</li> </ol>"},{"location":"development/changelog/","title":"Changelog","text":"<p>See the full CHANGELOG.md.</p>"},{"location":"development/changelog/#100-2025-02-18","title":"[1.0.0] - 2025-02-18","text":""},{"location":"development/changelog/#added","title":"Added","text":"<ul> <li>100% test coverage with 1800 passing tests</li> <li>AnalysisContext API \u2014 lazy, cached metric computation</li> <li>RollingEngine \u2014 batch rolling metric computation</li> <li>Pluggable visualization backends (Matplotlib, HTML, Plotly, Bokeh)</li> <li>Data provider module (Yahoo Finance, Alpha Vantage, Tushare, AkShare)</li> <li>Portfolio optimization (efficient frontier, risk parity)</li> <li>Monte Carlo simulation (bootstrap, scenario testing)</li> <li>Performance attribution (Brinson, Fama-French)</li> <li>150+ financial metrics</li> <li>Self-contained HTML reports</li> <li>Three-tier lazy loading (~0.04s import)</li> <li>Registry-based method generation</li> </ul>"},{"location":"development/contributing/","title":"Contributing","text":"<p>See the full CONTRIBUTING.md for details.</p>"},{"location":"development/contributing/#quick-summary","title":"Quick Summary","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch: <code>git checkout -b feature/my-feature</code></li> <li>Make changes and add tests</li> <li>Run <code>pytest tests/</code> and <code>ruff check fincore/ tests/</code></li> <li>Submit a Pull Request</li> </ol>"},{"location":"development/contributing/#coding-conventions","title":"Coding Conventions","text":"<ul> <li>Python 3.11+ with modern syntax</li> <li>120 char line length (Ruff enforced)</li> <li>NumPy-style docstrings on all public functions</li> <li>Explicit imports \u2014 no star imports</li> <li>Lazy loading for heavy dependencies</li> </ul>"},{"location":"development/guide/","title":"Development Guide","text":""},{"location":"development/guide/#environment","title":"Environment","text":"<pre><code>pip install -e \".[dev,viz]\"\n</code></pre>"},{"location":"development/guide/#tests","title":"Tests","text":"<pre><code># All tests (parallel)\npytest tests/\n\n# Sequential (debugging)\npytest tests/ --override-ini=\"addopts=\"\n\n# With coverage\npytest tests/ --cov=fincore --cov-report=term-missing\n</code></pre>"},{"location":"development/guide/#linting","title":"Linting","text":"<pre><code>ruff check fincore/ tests/\nruff format fincore/ tests/\n</code></pre>"},{"location":"development/guide/#type-checking","title":"Type Checking","text":"<pre><code>python -m mypy fincore/core fincore/metrics fincore/plugin fincore/data \\\n    fincore/optimization fincore/attribution fincore/report fincore/risk \\\n    fincore/simulation fincore/utils fincore/viz fincore/empyrical.py \\\n    fincore/tearsheets fincore/pyfolio.py --ignore-missing-imports\n</code></pre>"},{"location":"development/guide/#architecture","title":"Architecture","text":"<ul> <li>Lazy imports: <code>import fincore</code> ~0.04s</li> <li>Registry-based methods: <code>fincore/_registry.py</code> auto-generates 100+ <code>Empyrical</code> class methods</li> <li>Star import elimination: All <code>__init__.py</code> use explicit imports + <code>__all__</code></li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#from-pypi-recommended","title":"From PyPI (Recommended)","text":"<pre><code>pip install fincore\n</code></pre>"},{"location":"getting-started/installation/#from-source","title":"From Source","text":"<pre><code># China users\ngit clone https://gitee.com/yunjinqi/fincore\n\n# International users\ngit clone https://github.com/cloudQuant/fincore\n\ncd fincore\npip install -U .\n</code></pre>"},{"location":"getting-started/installation/#optional-dependencies","title":"Optional Dependencies","text":"<pre><code># Visualization (matplotlib, seaborn)\npip install \"fincore[viz]\"\n\n# Bayesian analysis (pymc)\npip install \"fincore[bayesian]\"\n\n# Everything\npip install \"fincore[all]\"\n\n# Development (pytest, ruff, mypy, etc.)\npip install \"fincore[dev]\"\n</code></pre>"},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python &gt;= 3.11</li> <li>numpy &gt;= 1.17.0</li> <li>pandas &gt;= 0.25.0</li> <li>scipy &gt;= 1.3.0</li> </ul>"},{"location":"getting-started/migration/","title":"Migration from empyrical","text":""},{"location":"getting-started/migration/#import-changes","title":"Import Changes","text":"<pre><code># Before (empyrical)\nfrom empyrical import sharpe_ratio, max_drawdown, alpha_beta\n\n# After (fincore) \u2014 drop-in replacement\nfrom fincore import sharpe_ratio, max_drawdown, alpha_beta\n</code></pre>"},{"location":"getting-started/migration/#new-features-in-fincore","title":"New Features in fincore","text":"Feature empyrical fincore Core Metrics \u2705 \u2705 Lazy Loading \u274c \u2705 AnalysisContext \u274c \u2705 RollingEngine \u274c \u2705 Data Providers \u274c \u2705 Portfolio Optimization \u274c \u2705 Pluggable Viz \u274c \u2705 Python 3.13 \u274c \u2705"},{"location":"getting-started/migration/#migration-steps","title":"Migration Steps","text":"<ol> <li>Replace <code>empyrical</code> with <code>fincore&gt;=1.0.0</code> in <code>requirements.txt</code></li> <li>Find-and-replace: <code>from empyrical import</code> \u2192 <code>from fincore import</code></li> <li>Run your existing tests \u2014 most should work without changes</li> <li>Gradually adopt <code>AnalysisContext</code> for better performance</li> </ol>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":""},{"location":"getting-started/quickstart/#analysiscontext-recommended","title":"AnalysisContext (Recommended)","text":"<pre><code>import pandas as pd\nimport numpy as np\nimport fincore\n\ndates = pd.bdate_range('2020-01-01', periods=252)\nreturns = pd.Series(np.random.normal(0.001, 0.02, 252), index=dates)\nbenchmark = pd.Series(np.random.normal(0.0005, 0.015, 252), index=dates)\n\nctx = fincore.analyze(returns, factor_returns=benchmark)\n\nprint(f\"Sharpe Ratio:     {ctx.sharpe_ratio:.4f}\")\nprint(f\"Max Drawdown:     {ctx.max_drawdown:.4f}\")\nprint(f\"Annual Return:    {ctx.annual_return:.4f}\")\n\n# Export\nctx.to_json()\nctx.to_html(path=\"report.html\")\n</code></pre>"},{"location":"getting-started/quickstart/#flat-api-function-style","title":"Flat API (Function Style)","text":"<pre><code>import fincore\n\nsr = fincore.sharpe_ratio(returns)\nmd = fincore.max_drawdown(returns)\nar = fincore.annual_return(returns)\n</code></pre>"},{"location":"getting-started/quickstart/#classic-api-empyrical-class","title":"Classic API (Empyrical Class)","text":"<pre><code>from fincore import Empyrical\n\nsharpe = Empyrical.sharpe_ratio(returns, risk_free=0.02/252)\nalpha, beta = Empyrical.alpha_beta(returns, benchmark)\n</code></pre>"},{"location":"getting-started/quickstart/#rollingengine","title":"RollingEngine","text":"<pre><code>from fincore.core.engine import RollingEngine\n\nengine = RollingEngine(returns, factor_returns=benchmark, window=60)\nresults = engine.compute(['sharpe', 'volatility', 'max_drawdown', 'beta'])\n</code></pre>"},{"location":"guide/analysis-context/","title":"AnalysisContext","text":"<p>The <code>AnalysisContext</code> provides lazy, cached metric computation with export capabilities.</p>"},{"location":"guide/analysis-context/#basic-usage","title":"Basic Usage","text":"<pre><code>import fincore\n\nctx = fincore.analyze(returns, factor_returns=benchmark)\n\n# Metrics computed on first access, then cached\nprint(ctx.sharpe_ratio)\nprint(ctx.max_drawdown)\nprint(ctx.annual_return)\nprint(ctx.alpha)\nprint(ctx.beta)\n</code></pre>"},{"location":"guide/analysis-context/#performance-stats","title":"Performance Stats","text":"<pre><code>stats = ctx.perf_stats()  # pandas Series with all key metrics\nprint(stats)\n</code></pre>"},{"location":"guide/analysis-context/#export","title":"Export","text":"<pre><code># JSON\njson_str = ctx.to_json()\n\n# Dictionary\nd = ctx.to_dict()\n\n# HTML report (self-contained, no extra dependencies)\nctx.to_html(path=\"report.html\")\n</code></pre>"},{"location":"guide/analysis-context/#api-reference","title":"API Reference","text":""},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext","title":"<code>fincore.core.context.AnalysisContext(returns, *, factor_returns=None, positions=None, transactions=None, period=DAILY)</code>","text":"<p>Lazy, cached container for performance analytics.</p> <p>All metrics are computed on first access and cached via :func:<code>functools.cached_property</code>.  Call :meth:<code>invalidate</code> to clear all cached values (e.g. after replacing the underlying data).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative simple returns with a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark / factor returns aligned to the same dates.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Daily net position values.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Executed trades.</p> <code>None</code> <code>period</code> <code>str</code> <p>Data frequency.  Default <code>DAILY</code>.</p> <code>DAILY</code> <p>Initialize the analysis context.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Portfolio returns.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark or factor returns.</p> <code>None</code> <code>positions</code> <code>DataFrame</code> <p>Portfolio positions.</p> <code>None</code> <code>transactions</code> <code>DataFrame</code> <p>Executed trades.</p> <code>None</code> <code>period</code> <code>str</code> <p>Data frequency.</p> <code>DAILY</code>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.annual_return","title":"<code>annual_return</code>  <code>cached</code> <code>property</code>","text":"<p>Annualized return.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.cumulative_returns","title":"<code>cumulative_returns</code>  <code>cached</code> <code>property</code>","text":"<p>Total cumulative return.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.annual_volatility","title":"<code>annual_volatility</code>  <code>cached</code> <code>property</code>","text":"<p>Annualized volatility.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.sharpe_ratio","title":"<code>sharpe_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Sharpe ratio (annualized).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.calmar_ratio","title":"<code>calmar_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Calmar ratio (annual return / max drawdown).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.stability","title":"<code>stability</code>  <code>cached</code> <code>property</code>","text":"<p>R-squared of linear fit to cumulative returns.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.max_drawdown","title":"<code>max_drawdown</code>  <code>cached</code> <code>property</code>","text":"<p>Maximum drawdown.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.omega_ratio","title":"<code>omega_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Omega ratio.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.sortino_ratio","title":"<code>sortino_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Sortino ratio (annualized).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.skew","title":"<code>skew</code>  <code>cached</code> <code>property</code>","text":"<p>Return skewness.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.kurtosis","title":"<code>kurtosis</code>  <code>cached</code> <code>property</code>","text":"<p>Return kurtosis.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.tail_ratio","title":"<code>tail_ratio</code>  <code>cached</code> <code>property</code>","text":"<p>Tail ratio (95th percentile / 5th percentile).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.daily_value_at_risk","title":"<code>daily_value_at_risk</code>  <code>cached</code> <code>property</code>","text":"<p>Daily Value at Risk.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.alpha","title":"<code>alpha</code>  <code>cached</code> <code>property</code>","text":"<p>Alpha (excess return over factor returns).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.beta","title":"<code>beta</code>  <code>cached</code> <code>property</code>","text":"<p>Beta (sensitivity to factor returns).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.perf_stats","title":"<code>perf_stats()</code>","text":"<p>Return a :class:<code>pd.Series</code> of key performance metrics.</p> <p>This method assembles the cached sub-metrics so that repeated calls are essentially free after the first computation.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.to_dict","title":"<code>to_dict()</code>","text":"<p>Return metrics as a plain dict (JSON-friendly values).</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.to_json","title":"<code>to_json(**kwargs)</code>","text":"<p>Serialize metrics to a JSON string.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.plot","title":"<code>plot(backend='matplotlib', **kwargs)</code>","text":"<p>Plot key performance charts using the specified backend.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>backend</code> <code>str</code> <p>Visualization backend name (<code>'matplotlib'</code> or <code>'html'</code>).</p> <code>'matplotlib'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>Depends on the backend (e.g. matplotlib Figure or HTML string).</code>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.to_html","title":"<code>to_html(path=None)</code>","text":"<p>Generate a self-contained HTML performance report.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>path</code> <code>str</code> <p>If given, write the HTML to this file path.</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>str</code> <p>The HTML report as a string.</p>"},{"location":"guide/analysis-context/#fincore.core.context.AnalysisContext.invalidate","title":"<code>invalidate()</code>","text":"<p>Clear all cached metric values.</p>"},{"location":"guide/concepts/","title":"Core Concepts","text":""},{"location":"guide/concepts/#data-model","title":"Data Model","text":"<p>Most APIs operate on daily (or intraday) return series:</p> <ul> <li><code>returns</code>: <code>pd.Series</code> of simple (non-cumulative) returns with <code>DatetimeIndex</code></li> <li><code>factor_returns</code>: optional benchmark returns aligned to <code>returns</code></li> <li><code>positions</code>: optional <code>pd.DataFrame</code> with one column per asset plus <code>cash</code></li> <li><code>transactions</code>: optional <code>pd.DataFrame</code> with <code>amount</code>, <code>price</code>, <code>symbol</code> columns</li> </ul>"},{"location":"guide/concepts/#three-api-levels","title":"Three API Levels","text":""},{"location":"guide/concepts/#1-flat-api-simplest","title":"1. Flat API (Simplest)","text":"<pre><code>import fincore\nfincore.sharpe_ratio(returns)\n</code></pre>"},{"location":"guide/concepts/#2-empyrical-class-150-methods","title":"2. Empyrical Class (150+ methods)","text":"<pre><code>from fincore import Empyrical\nEmpyrical.sharpe_ratio(returns)\n</code></pre>"},{"location":"guide/concepts/#3-analysiscontext-recommended","title":"3. AnalysisContext (Recommended)","text":"<pre><code>ctx = fincore.analyze(returns, factor_returns=benchmark)\nctx.sharpe_ratio  # lazy, cached\n</code></pre>"},{"location":"guide/concepts/#lazy-loading-architecture","title":"Lazy Loading Architecture","text":"<p><code>import fincore</code> loads in ~0.04s. Heavy submodules (matplotlib, scipy) are deferred via <code>__getattr__</code> until first access.</p>"},{"location":"guide/concepts/#period-constants","title":"Period Constants","text":"<pre><code>from fincore.constants import DAILY, WEEKLY, MONTHLY, QUARTERLY, YEARLY\n</code></pre> <p>These control annualization factors across all metrics.</p>"},{"location":"guide/optimization/","title":"Portfolio Optimization","text":""},{"location":"guide/optimization/#efficient-frontier","title":"Efficient Frontier","text":"<pre><code>from fincore.optimization import efficient_frontier\n\nef = efficient_frontier(returns, n_points=50)\nprint(f\"Min volatility: {ef['min_variance']['volatility']:.4f}\")\nprint(f\"Max Sharpe: {ef['max_sharpe']['sharpe']:.4f}\")\n</code></pre>"},{"location":"guide/optimization/#risk-parity","title":"Risk Parity","text":"<pre><code>from fincore.optimization import risk_parity\n\nrp = risk_parity(returns)\nprint(f\"Weights: {rp['weights']}\")\n</code></pre>"},{"location":"guide/optimization/#constrained-optimization","title":"Constrained Optimization","text":"<pre><code>from fincore.optimization import optimize\n\n# Max Sharpe ratio\nw = optimize(returns, objective=\"max_sharpe\")\n\n# Target return\nw = optimize(returns, objective=\"target_return\", target_return=0.15)\n\n# Target risk\nw = optimize(returns, objective=\"target_risk\", target_volatility=0.12)\n</code></pre>"},{"location":"guide/optimization/#api-reference","title":"API Reference","text":""},{"location":"guide/optimization/#fincore.optimization.frontier.efficient_frontier","title":"<code>fincore.optimization.frontier.efficient_frontier(returns, n_points=50, risk_free_rate=0.0, short_allowed=False, max_weight=1.0)</code>","text":"<p>Compute the mean-variance efficient frontier.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N). Columns = asset names.</p> \u200b\u5fc5\u9700\u200b <code>n_points</code> <code>int</code> <p>Number of points on the frontier.</p> <code>50</code> <code>risk_free_rate</code> <code>float</code> <p>Annual risk-free rate (used for Sharpe calculation).</p> <code>0.0</code> <code>short_allowed</code> <code>bool</code> <p>Whether short selling is allowed.</p> <code>False</code> <code>max_weight</code> <code>float</code> <p>Maximum weight per asset.</p> <code>1.0</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <ul> <li>'frontier_returns': array of annualised portfolio returns</li> <li>'frontier_volatilities': array of annualised portfolio volatilities</li> <li>'frontier_sharpe': array of Sharpe ratios</li> <li>'frontier_weights': (n_points x N) weight matrix</li> <li>'min_variance': dict with keys 'weights', 'return', 'volatility'</li> <li>'max_sharpe': dict with keys 'weights', 'return', 'volatility', 'sharpe'</li> <li>'asset_names': list of asset names</li> </ul>"},{"location":"guide/optimization/#fincore.optimization.risk_parity.risk_parity","title":"<code>fincore.optimization.risk_parity.risk_parity(returns, risk_budget=None, max_iter=1000)</code>","text":"<p>Compute risk-parity portfolio weights.</p> <p>Each asset's marginal risk contribution is equalised (or matched to a user-supplied risk budget).</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>risk_budget</code> <code>ndarray</code> <p>Target risk budget per asset (sums to 1). Defaults to equal budget <code>1/N</code> for each asset.</p> <code>None</code> <code>max_iter</code> <code>int</code> <p>Maximum solver iterations.</p> <code>1000</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <ul> <li>'weights': optimal weight array (N,)</li> <li>'risk_contributions': risk contribution per asset (N,)</li> <li>'volatility': portfolio annualised volatility</li> <li>'asset_names': list of asset names</li> </ul>"},{"location":"guide/optimization/#fincore.optimization.objectives.optimize","title":"<code>fincore.optimization.objectives.optimize(returns, objective='max_sharpe', risk_free_rate=0.0, target_return=None, target_volatility=None, short_allowed=False, max_weight=1.0, min_weight=None, sector_constraints=None, sector_map=None)</code>","text":"<p>Solve a constrained portfolio optimisation problem.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>DataFrame</code> <p>Asset returns (T x N).</p> \u200b\u5fc5\u9700\u200b <code>objective</code> <code>str</code> <p>One of 'max_sharpe', 'min_variance', 'target_return', 'target_risk'.</p> <code>'max_sharpe'</code> <code>risk_free_rate</code> <code>float</code> <p>Annual risk-free rate.</p> <code>0.0</code> <code>target_return</code> <code>float</code> <p>Required for <code>objective='target_return'</code>. Annualised target.</p> <code>None</code> <code>target_volatility</code> <code>float</code> <p>Required for <code>objective='target_risk'</code>. Annualised target.</p> <code>None</code> <code>short_allowed</code> <code>bool</code> <p>Allow negative weights.</p> <code>False</code> <code>max_weight</code> <code>float</code> <p>Upper bound per asset.</p> <code>1.0</code> <code>min_weight</code> <code>float</code> <p>Lower bound per asset. Defaults to 0 (or <code>-max_weight</code> if shorts allowed).</p> <code>None</code> <code>sector_constraints</code> <code>dict</code> <p><code>{sector_name: (min_alloc, max_alloc)}</code> pairs.</p> <code>None</code> <code>sector_map</code> <code>dict</code> <p><code>{asset_name: sector_name}</code> mapping (needed with <code>sector_constraints</code>).</p> <code>None</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict</code> <ul> <li>'weights': optimal weight array</li> <li>'return': annualised expected return</li> <li>'volatility': annualised volatility</li> <li>'sharpe': Sharpe ratio</li> <li>'asset_names': list</li> <li>'objective': objective used</li> </ul>"},{"location":"guide/rolling-engine/","title":"RollingEngine","text":"<p>Batch rolling metric computation in a single call.</p>"},{"location":"guide/rolling-engine/#usage","title":"Usage","text":"<pre><code>from fincore.core.engine import RollingEngine\n\nengine = RollingEngine(returns, factor_returns=benchmark, window=60)\nresults = engine.compute(['sharpe', 'volatility', 'max_drawdown', 'beta'])\n\nfor name, series in results.items():\n    print(f\"{name}: {len(series)} observations\")\n</code></pre>"},{"location":"guide/rolling-engine/#available-metrics","title":"Available Metrics","text":"<ul> <li><code>sharpe</code> \u2014 Rolling Sharpe ratio</li> <li><code>volatility</code> \u2014 Rolling annualized volatility</li> <li><code>max_drawdown</code> \u2014 Rolling maximum drawdown (vectorized)</li> <li><code>beta</code> \u2014 Rolling beta vs benchmark (requires <code>factor_returns</code>)</li> <li><code>sortino</code> \u2014 Rolling Sortino ratio</li> <li><code>mean_return</code> \u2014 Rolling annualized mean return</li> </ul>"},{"location":"guide/rolling-engine/#api-reference","title":"API Reference","text":""},{"location":"guide/rolling-engine/#fincore.core.engine.RollingEngine","title":"<code>fincore.core.engine.RollingEngine(returns, *, factor_returns=None, window=252, period=DAILY)</code>","text":"<p>Batch rolling metric computation engine.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series</code> <p>Non-cumulative simple returns with a DatetimeIndex.</p> \u200b\u5fc5\u9700\u200b <code>factor_returns</code> <code>Series</code> <p>Benchmark returns (required for <code>beta</code>).</p> <code>None</code> <code>window</code> <code>int</code> <p>Rolling window size.  Default 252 (approx. 1 year of daily data).</p> <code>252</code> <code>period</code> <code>str</code> <p>Data frequency.  Default <code>DAILY</code>.</p> <code>DAILY</code>"},{"location":"guide/rolling-engine/#fincore.core.engine.RollingEngine.available_metrics","title":"<code>available_metrics</code>  <code>property</code>","text":"<p>Return the set of metric names supported by this engine.</p>"},{"location":"guide/rolling-engine/#fincore.core.engine.RollingEngine.compute","title":"<code>compute(metrics='all')</code>","text":"<p>Compute the requested rolling metrics.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>metrics</code> <code>list of str or ``'all'``</code> <p>Which metrics to compute.  Pass <code>'all'</code> to compute every available metric.</p> <code>'all'</code> <p>\u200b\u8fd4\u56de\u200b\uff1a</p> \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b <code>dict[str, Series]</code> <p>Mapping from metric name to rolling values.</p>"},{"location":"guide/visualization/","title":"Visualization","text":"<p>fincore provides pluggable visualization backends via the <code>VizBackend</code> protocol.</p>"},{"location":"guide/visualization/#built-in-backends","title":"Built-in Backends","text":""},{"location":"guide/visualization/#matplotlib","title":"Matplotlib","text":"<pre><code>from fincore.viz import get_backend\nviz = get_backend(\"matplotlib\")\nviz.plot_returns(cum_returns)\nviz.plot_drawdown(drawdown)\nviz.plot_rolling_sharpe(rolling_sharpe)\nviz.plot_monthly_heatmap(returns)\n</code></pre>"},{"location":"guide/visualization/#html-no-extra-dependencies","title":"HTML (no extra dependencies)","text":"<pre><code>from fincore.viz.html_backend import HtmlReportBuilder\nbuilder = HtmlReportBuilder()\nbuilder.add_title(\"My Report\")\nbuilder.add_stats_table(stats)\nbuilder.save(\"report.html\")\n</code></pre>"},{"location":"guide/visualization/#via-analysiscontext","title":"Via AnalysisContext","text":"<pre><code>ctx = fincore.analyze(returns, factor_returns=benchmark)\nctx.plot(backend=\"matplotlib\")\nctx.to_html(path=\"report.html\")\n</code></pre>"},{"location":"guide/visualization/#api-reference","title":"API Reference","text":""},{"location":"guide/visualization/#fincore.viz.base.VizBackend","title":"<code>fincore.viz.base.VizBackend</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Protocol that every visualization backend must implement.</p>"},{"location":"guide/visualization/#fincore.viz.base.VizBackend.plot_returns","title":"<code>plot_returns(cum_returns, **kwargs)</code>","text":"<p>Plot cumulative returns.</p>"},{"location":"guide/visualization/#fincore.viz.base.VizBackend.plot_drawdown","title":"<code>plot_drawdown(drawdown, **kwargs)</code>","text":"<p>Plot drawdown underwater chart.</p>"},{"location":"guide/visualization/#fincore.viz.base.VizBackend.plot_rolling_sharpe","title":"<code>plot_rolling_sharpe(sharpe, benchmark_sharpe=None, window=252, **kwargs)</code>","text":"<p>Plot rolling Sharpe ratio.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>sharpe</code> <code>Series</code> <p>Rolling Sharpe ratio series.</p> \u200b\u5fc5\u9700\u200b <code>benchmark_sharpe</code> <code>Series</code> <p>Optional benchmark rolling Sharpe series.</p> <code>None</code> <code>window</code> <code>int</code> <p>Window size (used for title/annotation).</p> <code>252</code>"},{"location":"guide/visualization/#fincore.viz.base.VizBackend.plot_monthly_heatmap","title":"<code>plot_monthly_heatmap(returns, **kwargs)</code>","text":"<p>Plot monthly returns heatmap.</p> <p>\u200b\u53c2\u6570\u200b\uff1a</p> \u200b\u540d\u79f0\u200b \u200b\u7c7b\u578b\u200b \u200b\u63cf\u8ff0\u200b \u200b\u9ed8\u8ba4\u200b <code>returns</code> <code>Series or DataFrame</code> <p>Either a daily returns series (will be aggregated internally) or a year x month table of monthly returns.</p> \u200b\u5fc5\u9700"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder","title":"<code>fincore.viz.html_backend.HtmlReportBuilder()</code>","text":"<p>Build a standalone HTML performance report.</p> <p>This class also satisfies the :class:<code>~fincore.viz.base.VizBackend</code> protocol (the <code>plot_*</code> methods append HTML sections and return <code>self</code> for chaining).</p> <p>Usage::</p> <pre><code>from fincore.viz.html_backend import HtmlReportBuilder\nbuilder = HtmlReportBuilder()\nbuilder.add_title(\"Performance Report\")\nbuilder.add_stats_table(perf_stats_series)\nhtml_str = builder.build()\n</code></pre>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.add_title","title":"<code>add_title(title='Performance Report')</code>","text":"<p>Append an <code>&lt;h1&gt;</code> title section to the report.</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.add_heading","title":"<code>add_heading(text, level=2)</code>","text":"<p>Append a heading (<code>&lt;h2&gt;</code> \u2026 <code>&lt;h6&gt;</code>) section to the report.</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.add_stats_table","title":"<code>add_stats_table(stats)</code>","text":"<p>Render a two-column key/value table from a pandas Series.</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.add_metric_cards","title":"<code>add_metric_cards(stats, keys=None)</code>","text":"<p>Render inline metric cards for selected keys from stats.</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.add_html","title":"<code>add_html(raw_html)</code>","text":"<p>Append raw HTML directly to the report body.</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.plot_returns","title":"<code>plot_returns(cum_returns, **kwargs)</code>","text":"<p>Append a cumulative-returns table section (VizBackend protocol).</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.plot_drawdown","title":"<code>plot_drawdown(drawdown, **kwargs)</code>","text":"<p>Append a drawdown table section (VizBackend protocol).</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.plot_rolling_sharpe","title":"<code>plot_rolling_sharpe(sharpe, benchmark_sharpe=None, window=252, **kwargs)</code>","text":"<p>Append a rolling Sharpe ratio table section (VizBackend protocol).</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.plot_monthly_heatmap","title":"<code>plot_monthly_heatmap(returns, **kwargs)</code>","text":"<p>Append a monthly-returns pivot table section (VizBackend protocol).</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.build","title":"<code>build()</code>","text":"<p>Assemble all sections into a complete HTML document string.</p>"},{"location":"guide/visualization/#fincore.viz.html_backend.HtmlReportBuilder.save","title":"<code>save(path)</code>","text":"<p>Write the report to a file at path.</p>"}]}